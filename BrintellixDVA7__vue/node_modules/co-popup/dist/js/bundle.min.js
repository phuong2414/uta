!function(){function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}return e}()({1:[function(e,t,n){(function(n){"use strict";var i=e("./src/js/popup").Popup,o=e("component").createComponent;t.exports=o({name:"co-popup",constructor:i,localExtensions:{components:{"co-button":e("co-button"),"co-container":e("co-container"),"co-image":e("co-image")}},localizationTemplate:n("i18n/{lang}.json")}),e("rivets").components[t.exports.name]=t.exports}).call(this,function(t){var n=e("settings"),i=n.components,o="";return i.replace(new RegExp("/$"),o)+"/co-popup/"+t.replace(new RegExp("^/"),o)})},{"./src/js/popup":24,"co-button":3,"co-container":6,"co-image":10,component:18,rivets:"rivets",settings:"settings"}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.storage={}}return o(e,[{key:"set",value:function(e,t){this.storage[e]=t}},{key:"get",value:function(e){return this.storage[e]}},{key:"isCache",value:function(e){return Object.prototype.hasOwnProperty.call(this.storage,e)}}]),e}();t.exports=r},{}],3:[function(e,t,n){(function(n){"use strict";var i=e("component").createComponent,o=e("./src/js/Button.js").Button;t.exports=i({name:"co-button",constructor:o,localizationTemplate:n("i18n/{lang}.json")})}).call(this,function(t){var n=e("settings"),i=n.components,o="";return i.replace(new RegExp("/$"),o)+"/co-popup/_assets/co-button/"+t.replace(new RegExp("^/"),o)})},{"./src/js/Button.js":4,component:18,settings:"settings"}],4:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Button=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("component"),l=e("nav"),p=o(l),f=e("touch"),h=e("utils"),d=i(h);n.Button=function(t){function n(){r(this,n);var e=s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.element.addEventListener(f.events.start,e),e.element.addEventListener("tap",e),Object.keys(e.defaults).forEach(function(t){e.defaults[t].refresh&&e.refresh(t)}),p["default"].onleave(function(){e.active=!1}),e}return a(n,t),u(n,[{key:"handleEvent",value:function(e){if(!this.disabled)switch(e.type){case"tap":this.toggles&&this.toggle();break;case f.events.start:this.press(),this.toggles||this.activateButton(),document.addEventListener(f.events.end,this,!0);break;case f.events.end:this.release(),this.toggles||this.deactivateButton(),document.removeEventListener(f.events.end,this,!0)}}},{key:"activateButton",value:function(){this.active=!0}},{key:"deactivateButton",value:function(){this.active=!1}},{key:"press",value:function(){this.pressed=!0,d.dispatchEvent(this.element,"press")}},{key:"release",value:function(){this.pressed=!1,d.dispatchEvent(this.element,"release")}},{key:"toggle",value:function(){this.active=!this.active,d.dispatchEvent(this.element,"toggle")}},{key:"dispatchActiveState",value:function(){this.notInitialActivation&&d.dispatchEvent(this.element,this.active?"activatebutton":"deactivatebutton"),this.notInitialActivation=!0}},{key:"toggleOff",value:function(){!this.toggles&&this.active&&(this.deactivateButton(),d.dispatchEvent(this.element,"toggle"))}},{key:"template",value:function(){return e("../template.html")}},{key:"refresh",value:function(e){var t=this[e]?"add":"remove";this.element.classList[t](e),"toggles"===e?this.toggleOff():"active"===e&&this.dispatchActiveState()}},{key:"defaults",get:function(){return{toggles:{type:Boolean,value:!1},active:{type:Boolean,value:!1,refresh:!0},pressed:{type:Boolean,value:!1,refresh:!0},shadow:{type:Boolean,value:!1,refresh:!0},disabled:{type:Boolean,value:!1,refresh:!0}}}}]),n}(c.Component)},{"../template.html":5,component:18,nav:"nav",touch:"touch",utils:"utils"}],5:[function(e,t,n){t.exports="<content co-button></content>"},{}],6:[function(e,t,n){(function(n){"use strict";var i=e("component").createComponent,o=e("./src/js/Container.js").Container;t.exports=i({name:"co-container",constructor:o,localizationTemplate:n("i18n/{lang}.json")})}).call(this,function(t){var n=e("settings"),i=n.components,o="";return i.replace(new RegExp("/$"),o)+"/co-popup/_assets/co-container/"+t.replace(new RegExp("^/"),o)})},{"./src/js/Container.js":7,component:18,settings:"settings"}],7:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Container=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("component"),l=e("dispatcher"),p=o(l),f=e("./utils.js"),h=i(f),d="hidden-element",v="highlighted",m="empty";n.Container=function(t){function n(){r(this,n);var e=s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return"false"===e.element.getAttribute("container")?e.element.removeAttribute("container"):e.element.setAttribute("container","true"),e.subscribeAction=p["default"].subscribeAction(function(t){console.log(t.type),t.type===p["default"].ActionType.EDIT_PRESENTATION?e.element.classList.add(v):t.type===p["default"].ActionType.VIEW_PRESENTATION&&e.element.classList.remove(v)}),e.addEmptyClass(),h.observe(e.element,{childList:!0,subtree:!0},e.addEmptyClass.bind(e)),e}return a(n,t),u(n,[{key:"getChilds",value:function(){var e=this.element.children;return Array.from(e).filter(function(e){return e.model}).filter(function(e){return!e.classList.contains(d)})}},{key:"addEmptyClass",value:function(){this.element.classList[this.getChilds().length?"remove":"add"](m)}},{key:"unbind",value:function(){this.subscribeAction.unsubscribe()}},{key:"template",value:function(){return e("../template.html")}},{key:"defaults",get:function(){return{}}}]),n}(c.Component)},{"../template.html":9,"./utils.js":8,component:18,dispatcher:"dispatcher"}],8:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=e("utils");i(o);t.exports.observe=function(e,t,n){new MutationObserver(function(e){n(e)}).observe(e,t),n([])}},{utils:"utils"}],9:[function(e,t,n){t.exports="<content co-container></content>"},{}],10:[function(e,t,n){(function(n){"use strict";var i=e("./src/js/image").Image,o=e("component").createComponent;t.exports=o({name:"co-image",constructor:i,localizationTemplate:n("i18n/{lang}.json")})}).call(this,function(t){var n=e("settings"),i=n.components,o="";return i.replace(new RegExp("/$"),o)+"/co-popup/_assets/co-image/"+t.replace(new RegExp("^/"),o)})},{"./src/js/image":11,component:18,settings:"settings"}],11:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Image=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("component"),c=e("settings"),l=i(c),p=n.Image=function(n){function i(){return o(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return s(i,n),a(i,[{key:"template",value:function(){return e("../template.html")}},{key:"formatSrc",value:function(){return/\/common\//.test(this.src)?l["default"].media+this.src:this.src}},{key:"getBackgroundStyles",value:function(){return"background: url('"+this.formatSrc()+"') "+this.position+" no-repeat; background-size: "+this.size+";"}},{key:"defaults",get:function(){return{src:{value:t("../../media/images/default.png"),type:"File",fileTypes:["image"]},position:{value:"center center",values:["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"],type:String},size:{value:"contain",values:["contain","cover","100% 100%"],type:String}}}}]),i}(u.Component);n["default"]=p}).call(this,function(t){var n=e("settings"),i=n.components,o="";return i.replace(new RegExp("/$"),o)+"/co-popup/_assets/co-image/src/js/"+t.replace(new RegExp("^/"),o)})},{"../template.html":12,component:18,settings:"settings"}],12:[function(e,t,n){t.exports='<div rv-style="getBackgroundStyles &lt; src position size" rv-show="src" co-image></div>'},{}],13:[function(e,t,n){(function(n){"use strict";var i=e("./src/js/shower").Shower,o=e("component").createComponent;t.exports=o({name:"co-shower",constructor:i,localExtensions:{binders:{"animate-binder":e("animate-binder")}},localizationTemplate:n("i18n/{lang}.json")})}).call(this,function(t){var n=e("settings"),i=n.components,o="";return i.replace(new RegExp("/$"),o)+"/co-popup/_assets/co-shower/"+t.replace(new RegExp("^/"),o)})},{"./src/js/shower":15,"animate-binder":"animate-binder",component:18,settings:"settings"}],14:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.EventManager=function(){function e(t){i(this,e),this.handler=t.bind(t),this.events=[]}return o(e,[{key:"updateListeners",value:function(e){this.removeUnusedListeners(e),this.addListeners(e)}},{key:"addListeners",value:function(e){var t=this;e.forEach(function(e){t.events.indexOf(e)<0&&(document.addEventListener(e,t.handler),t.events.push(e))})}},{key:"removeUnusedListeners",value:function(e){var t=this;this.events=this.events.filter(function(n){return!(e.indexOf(n)<0)||(document.removeEventListener(n,t.handler),!1)})}}]),e}()},{}],15:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Shower=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("component"),l=e("utils"),p=o(l),f=e("prefixer"),h=e("nav"),d=i(h),v=e("animate-binder"),m=i(v),b=e("./event-manager"),y=e("dispatcher"),g=i(y);n.Shower=function(t){function n(){r(this,n);var e=s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.saveEvent=null,e.animationModel={},e.show=function(t){return e.showHandler(t)},e.hide=function(t){return e.hideHandler(t)},e.allowHide=p.debounce(function(){e.forbidHide=!1},25),e.showManager=new b.EventManager(e.show),e.hideManager=new b.EventManager(e.hide),e.element.addEventListener(f.events.animationstart,e),e.element.addEventListener(f.events.animationend,e),d["default"].onenter(function(){e.isOnleave=!1}),d["default"].onleave(function(){e.isOnleave=!0,e.isAnimate=!1}),e.element.addEventListener("tap",e),e.updateShowGlobalEvents(),e.updateHideGlobalEvents(),e.element.addEventListener("show",function(e){return e.stopPropagation()}),e.element.addEventListener("hide",function(e){return e.stopPropagation()}),e.setOutsideClose(),e[e.showOnSlideEnter?"showElement":"hideElement"](),e.blockDispatcher||e.subscribeDispatcher(),document.addEventListener("resetModel",function(){e.visible=e.showOnSlideEnter}),e}return a(n,t),u(n,[{key:"ready",value:function(e){var t=this.element.getAttribute("fixed")?this.element.getAttribute("fixed")+",animation":"animation";this.element.setAttribute("fixed",t),e.addBinding(this.element,"animate","animationModel"),this.animationModel.blockDispatcher=this.showAnimation.blockDispatcher||this.hideAnimation.blockDispatcher}},{key:"subscribeDispatcher",value:function(){var e=this;g["default"].subscribeAction(function(t){switch(t.type){case g["default"].ActionType.EDIT_PRESENTATION:e.visible=e.showOnSlideEnter,e.saveStateVisible=e.visible;break;case g["default"].ActionType.VIEW_PRESENTATION:e.deactivate(),setTimeout(function(t){e.visible=e.showOnSlideEnter},100)}})}},{key:"activate",value:function(){this.saveStateVisible=this.visible,this.visible=!0,this.showElement()}},{key:"deactivate",value:function(){this.visible=this.saveStateVisible,this.visible||this.hideElement()}},{key:"showHandler",value:function(e){this.saveEvent===e||this.visible||(this.visible=!0,this.saveEvent=e)}},{key:"hideHandler",value:function(e){this.saveEvent!==e&&this.visible&&!this.forbidHide&&(this.visible=!1,this.lockSwipeWhenOpened&&d["default"].unlock(),this.saveEvent=e)}},{key:"template",value:function(){return e("../template.html")}},{key:"handleEvent",value:function(e){switch(e.type){case"tap":e.stopPropagation();break;case"animationstart":case"webkitAnimationStart":e.target===this.element&&(this.isAnimate=!0,this.showElement());break;case"animationend":case"webkitAnimationEnd":e.target===this.element&&(this.isAnimate=!1,this.hideElement())}}},{key:"refresh",value:function(e){switch(e){case"visible":(this.element.binders.animate.isEditMode||this.isOnleave)&&(this[e]?this.showElement():this.hideElement()),this.animateContainer();break;case"hideOnOutsideTap":this.setOutsideClose();break;case"showOn":this.updateShowGlobalEvents();break;case"hideOn":this.updateHideGlobalEvents()}}},{key:"animateContainer",value:function(){this.visible?this.showContainer():this.hideContainer()}},{key:"isWithoutAnimation",value:function(e){return!e.name||e.disabled}},{key:"showContainer",value:function(){this.forbidHide=!0,this.allowHide(),this.isWithoutAnimation(this.showAnimation)&&(this.showElement(),this.disableAnimation()),this.animateElement(this.showAnimation),p.dispathEvent(this.element,"show",{cancelable:!0})}},{key:"hideContainer",value:function(){this.isWithoutAnimation(this.hideAnimation)&&(this.hideElement(),this.disableAnimation()),this.animateElement(this.hideAnimation),p.dispathEvent(this.element,"hide",{cancelable:!0})}},{key:"disableAnimation",value:function(){this.animationModel.name="",this.animationModel.disabled=!0}},{key:"animateElement",value:function(e){this.animationModel.delay=e.delay,this.animationModel.duration=e.duration,this.animationModel.disabled=e.disabled,p.mixin(this.animationModel,e)}},{key:"showElement",value:function(){this.visible&&this.element.classList.add("visible")}},{key:"hideElement",value:function(){this.visible||this.element.classList.remove("visible")}},{key:"updateShowGlobalEvents",value:function(){this.showManager.updateListeners(this.getEvents("showOn"))}},{key:"updateHideGlobalEvents",value:function(){this.hideManager.updateListeners(this.getEvents("hideOn"))}},{key:"getEvents",value:function(e){return this[e]?this[e].split(" "):[]}},{key:"setOutsideClose",value:function(){document[this.hideOnOutsideTap?"addEventListener":"removeEventListener"]("tap",this.hide)}},{key:"defaults",get:function(){return{visible:{value:!1,type:Boolean,refresh:!0},showOnSlideEnter:{value:!1,type:Boolean,optional:!0},"show-on":{value:"show",type:String,refresh:!0,optional:!0},"hide-on":{value:"hide",type:String,refresh:!0,optional:!0},"show-animation":{value:{name:"fadeIn",duration:.5,delay:0,disabled:!1,infinite:!1,on:"",initVisibility:!1,blockDispatcher:!1},scheme:m["default"].prototype.defaults,base:m["default"],type:Object},"hide-animation":{value:{name:"fadeOut",duration:.5,delay:0,disabled:!1,infinite:!1,on:"",initVisibility:!0,blockDispatcher:!1},scheme:m["default"].prototype.defaults,base:m["default"],type:Object},"hide-on-outside-tap":{value:!1,type:Boolean,refresh:!0,optional:!0},"lock-swipe-when-opened":{value:!1,type:Boolean}}}}]),n}(c.Component)},{"../template.html":16,"./event-manager":14,"animate-binder":"animate-binder",component:18,dispatcher:"dispatcher",nav:"nav",prefixer:"prefixer",utils:"utils"}],16:[function(e,t,n){t.exports="<content co-shower></content>"},{}],17:[function(e,t,n){t.exports={localizationPath:"components/{name}/i18n/{lang}.json"}},{}],18:[function(e,t,n){"use strict";function i(e,t,n){u.components[e]=o(e,t,n)}function o(e,t,n){var i;"object"===("undefined"==typeof e?"undefined":a(e))?(i=e.name,t=e.constructor,n=e.localExtensions):i=e,t.prototype.localizationTemplate=e.localizationTemplate||h.localizationPath;var o={name:i,block:t.block,"static":r(t.prototype.defaults),template:t.prototype.template,constructor:t,initialize:function(e,n){var o=c.toCamelCaseObject(t.prototype.defaults),r=p(o,n,i),s=new t(e,r,this.view,this);return t.prototype.name=i,f.call(this,s,o,n.model||{}),s},unbind:function(){}};return n&&u._.extensions.forEach(function(e){var t=n[e];t&&(o[e]=t)}),o}function r(e){return Object.keys(e).filter(function(t){return s(e,t)}).map(function(e){return c.toCamelCase(e)})}function s(e,t){return e[t]&&e[t]["static"]}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=e("rivets"),c=e("utils"),l=e("./src/js/ComponentConstructor.js").ComponentConstructor,p=e("./src/js/buildModel.js"),f=e("./src/js/buildObservations.js"),h=e("./config.json");t.exports=i,t.exports.createComponent=o,t.exports.Component=l},{"./config.json":17,"./src/js/ComponentConstructor.js":19,"./src/js/buildModel.js":22,"./src/js/buildObservations.js":23,rivets:"rivets",utils:"utils"}],19:[function(e,t,n){"use strict";function i(e,t,n,i){this.element=e,this.parentScope=n.models,v.mixin(this,t),this.element.model=this,this.element.view={subscribe:h.bind(this)},this.element.setAttribute("co-component",""),this.model=t,this.view=n,this.binding=i,this.element.addEventListener("activate",r.bind(this)),this.element.addEventListener("deactivate",s.bind(this)),this.setIsConfigurable()}function o(e){var t=e.replace("co-","").split("-").join(" ");return t[0].toUpperCase()+t.substring(1,t.lenght)}function r(e){if("function"==typeof this.activate&&a(e)){var t=v.parse(this);this.activate(e.target),this.difference=v.difference(t,v.parse(this))}}function s(e){"function"==typeof this.deactivate&&a(e)&&this.deactivate(e.target),v.deepMixin(this,this.difference)}function a(e){return e.detail&&!!e.detail.isCobaltEvent}function u(e){return p(e).some(function(e){return l(e)})}function c(e){var t=e.element&&e.element.binders;return t&&Object.keys(t).some(function(e){return l(t[e].keypath)})}function l(e){return v.startsWith(e,"m.common")}function p(e,t){return t=t||[],e&&"function"==typeof e.getKeypath&&(t.push(e.getKeypath()),p(e.parentScope,t)),t}function f(e){return e.getAttribute("user-label")}function h(e){var t=this;g.subscribeEvent(function(n){n.type===g.EventType.DOM_REFRESHED&&n.element===t.element&&e(t.element)})}var d="undefined"==typeof Promise?e("es6-promise").Promise:Promise,v=e("utils"),m=e("./buildKeypath.js"),b=e("./buildLocalization.js"),y=e("general-model"),g=e("dispatcher");i.prototype.isCommon=function(){return u(this)||c(this)},i.prototype.getTextElementsByProperty=function(e){return v.toArray(this.element.querySelectorAll("[rv-html]")).filter(function(t){return t.getAttribute("rv-html")===e}).filter(function(e){return e.scope===this},this)},i.prototype.getLocalization=function(e){return b(this.__proto__.constructor,e)},i.prototype.getAbsoluteKeypath=function(){return m(this.parentScope,this.getKeypath())},i.prototype.getKeypath=function(){return this.element.getAttribute("model")||""},i.prototype.toJSON=function(){var e=this;return Object.keys(this).reduce(function(t,n){return e.model.hasOwnProperty(n)&&(t[n]=e[n]),t},{})},i.prototype.setIsConfigurable=function(){var e=this.getKeypath();Object.defineProperty(this,"isConfigurable",{value:v.startsWith(e,"m."),enumerable:!0,configurable:!1,writable:!0})},i.prototype.getLabel=function(e){return new d(function(t,n){var i=f(this.element);i?t(i):b(this.__proto__.constructor,e).then(function(e){t(e.name)})["catch"](function(e){t(o(this.name||this.element.tagName.toLowerCase()))}.bind(this))}.bind(this))},i.prototype.setLabel=function(e){this.element.setAttribute("user-label",e)},i.prototype.subscribe=function(e){return(new y.ModelNotifier).observe(this.model).subscribe(function(t){e(t)},!0)},n.ComponentConstructor=i},{"./buildKeypath.js":20,"./buildLocalization.js":21,dispatcher:"dispatcher","es6-promise":"es6-promise","general-model":"general-model",utils:"utils"}],20:[function(e,t,n){"use strict";function i(e,t){var n=s(t);return e?n?e+"."+s(t):e:t}function o(e,t){return t=t||[],e&&e.keypath&&(t.unshift(r(e),e.index),o(e.__proto__,t)),t}function r(e){return e.__proto__.keypath?s(e.keypath):e.keypath}function s(e){return e.split(".").slice(1).join(".")}t.exports=function(e,t){return i(o(e).join("."),t)}},{}],21:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n="en",i=t||n;return r(e,i,n).then(function(t){return c(t.defaults,e.prototype.defaults,i).then(function(){return t})})}function r(e,t,n){var i=s(e,t);return a(i).then(function(i){if(u(i))return i;if(t!==n){var o=s(e,n);return a(o)}return d.resolve({})})}function s(e,t){return(0,p.template)(e.prototype.localizationTemplate,{name:e.prototype.name,lang:t})}function a(e){var t=!0,n=null;return v.isCache(e)||v.set(e,(0,l.loadJSON)(e,n,t)),v.get(e).then(function(e){return Object.assign({},e)})}function u(e){return e&&Object.keys(e).length}function c(e,t,n){var i=[],r=function(r){var s=t[r],a=void 0;if(s.sealed)return"continue";if(s.base)a=o(s.base,n).then(function(t){return e[r].defaults=t.defaults});else{if(!s.scheme)return"continue";a=c(e[r].defaults,s.scheme,n)}i.push(a)};for(var s in t){r(s)}return d.all(i)}var l=e("loader"),p=e("utils"),f=e("cache"),h=i(f),d="undefined"==typeof Promise?e("es6-promise").Promise:Promise,v=new h["default"];t.exports=o},{cache:2,"es6-promise":"es6-promise",loader:"loader",utils:"utils"}],22:[function(e,t,n){"use strict";function i(e,t,n){var i=s(e),r=c.toCamelCaseObject(t.model||{}),u=a(e,t),l=o(o(i,r,e),u,e);return l}function o(e,t,n){return Object.keys(t).forEach(function(i){t.hasOwnProperty(i)&&u(t[i])&&n.hasOwnProperty(i)&&(e[i]&&e[i].constructor===Object&&r(n[i].value,t[i]),e[i]=t[i])}),e}function r(e,t){return Object.keys(e).forEach(function(n){t.hasOwnProperty(n)||(t[n]=e[n])})}function s(e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n].value,t},{})}function a(e,t){return Object.keys(e).reduce(function(n,i){return t.hasOwnProperty(i)&&(e[i]&&e[i]["static"]?n[i]=c.revive(t[i]):n[i]=t[i]),n},{})}function u(e){return void 0!==e&&null!==e}var c=e("utils");t.exports=i},{utils:"utils"}],23:[function(e,t,n){"use strict";function i(e,t){setTimeout(function(){(new s.ModelNotifier).deepObserve(t,e).subscribe(function(n){t.refresh(e)},!0)},50)}function o(e,t){var n=a.indexOf(e[t].type)!==-1;return n?n:Array.isArray(e[t].type)}function r(e,t){return!!e[t].refresh}var s=e("general-model"),a=[Object,Array,DataView,"Object","Array","DataView"];t.exports=function(e,t,n){Object.keys(t).forEach(function(s){n[s]=e[s],r(t,s)&&o(t,s)&&i(s,e),this.observe(e,s,function(){r(t,s)&&e.refresh(s),e.model[s]=e[s],n[s]=e[s]}),this.observe(e.model,s,function(){e[s]=e.model[s]}),this.observe(n,s,function(){e[s]=n[s]})},this)}},{"general-model":"general-model"}],24:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Popup=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=e("utils"),l=e("nav"),p=i(l),f=e("co-image"),h=i(f),d=e("co-shower"),v=i(d),m=n.Popup=function(n){function i(){o(this,i);var e=r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments));return e.element.setAttribute("container","container"),e.subscribeToEvents(),e.setId(),e.openPopupHandler=function(t){return e.openPopup(t)},e.closePopupHandler=function(t){return e.closePopup(t)},e}return s(i,n),a(i,[{key:"hideHandler",value:function(e){e.popupId!==this.id&&u(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"hideHandler",this).call(this,e)}},{key:"sortObjectByArray",value:function(e,t){return t.reduce(function(t,n){return t[n]=e[n],t},{})}},{key:"template",value:function(){return e("../template.html")}},{key:"refresh",value:function(e){"id"===e&&this.setId(),u(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"refresh",this).call(this,e)}},{key:"subscribeToEvents",value:function(){var e=this;this.element.addEventListener("open",function(t){return e.openPopupHandler(t)}),this.element.addEventListener("show",function(){e.dispatchEvent(e.element,"popupenter",{id:e.id})}),this.element.addEventListener("hide",function(){e.dispatchEvent(e.element,"popupleave",{id:e.id})}),this.closeOnWillgoto&&(p["default"].onleave(this.deactivate.bind(this)),p["default"].onwillgoto(this.deactivate.bind(this))),p["default"].onenter(function(){e.showOnSlideEnter?e.showPopup():e.hidePopup()})}},{key:"openPopup",value:function(e){this.lockSwipeWhenOpened&&p["default"].lock(),this.isAnimate||(this.showPopup(),this.stopPropagation(e))}},{key:"closePopup",value:function(e){this.lockSwipeWhenOpened&&p["default"].unlock(),this.isAnimate||(this.hidePopup(),this.stopPropagation(e))}},{key:"showPopup",value:function(){this.setPopupVisible(),this.trackWasOpened()}},{key:"setPopupVisible",value:function(){this.visible=!0}},{key:"trackWasOpened",value:function(){this.wasOpened=!0}},{key:"hidePopup",value:function(){this.visible=!1}},{key:"activate",value:function(){var e=this;this.timeout&&clearTimeout(this.timeout),setTimeout(function(){e.setPopupVisible(),e.showElement()},0)}},{key:"deactivate",value:function(){var e=this;this.timeout=setTimeout(function(){e.hidePopup(),e.hideElement()},100)}},{key:"setId",value:function(){this.id||(this.id=this.element.id),this.id?this.element.dataset.eid=this.id:this.element.dataset.eid&&delete this.element.dataset.eid}},{key:"stopPropagation",value:function(e){e&&e.stopPropagation()}},{key:"dispatchEvent",value:function(e,t,n){(0,c.dispatchEvent)(e,t,{detail:n||{}})}},{key:"defaults",get:function(){var e=u(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"defaults",this);e.showOnSlideEnter.optional=!1,e["hide-on-outside-tap"].optional=!1,e["hide-on-outside-tap"].optional=!1,e["show-on"].sealed=!0,e["hide-on"].sealed=!0,e.visible.sealed=!0;var n=["id","title","show-close-button","showOnSlideEnter","lock-swipe-when-opened","hide-on-outside-tap","close-button-image","was-opened","close-on-willgoto","visible","show-on","hide-on","show-animation","hide-animation","screenshotStates"];return this.sortObjectByArray((0,c.mixin)({id:{value:"",type:String,refresh:!0,sealed:!0},title:{value:"Popup label",type:String},"show-close-button":{type:Boolean,value:!0},"close-button-image":{value:{src:t("../../media/images/close-black.png")},scheme:h["default"].constructor.prototype.defaults,base:h["default"].constructor,type:Object},"was-opened":{value:!1,sealed:!0,type:Boolean},"close-on-willgoto":{type:Boolean,optional:!0,value:!0},screenshotStates:{type:String,value:"on",values:["on","once","off"]}},e),n)}}]),i}(v["default"].constructor);n.Popup=m}).call(this,function(t){var n=e("settings"),i=n.components,o="";return i.replace(new RegExp("/$"),o)+"/co-popup/src/js/"+t.replace(new RegExp("^/"),o)})},{"../template.html":25,
"co-image":10,"co-shower":13,nav:"nav",settings:"settings",utils:"utils"}],25:[function(e,t,n){t.exports='<content co-popup></content><co-button sealed class="close-button" rv-class-image="closeButtonImage.src" rv-show="showCloseButton" rv-on-tap="closePopupHandler" fixed="animation" co-popup><co-container user-label="Popup close button" co-popup><co-image model="closeButtonImage" sealed co-popup></co-image></co-container></co-button>'},{}]},{},[1]);