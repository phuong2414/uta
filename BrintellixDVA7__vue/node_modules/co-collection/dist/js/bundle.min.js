!function(){function e(t,n,i){function r(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var a=n[s]={exports:{}};t[s][0].call(a.exports,function(e){var n=t[s][1][e];return r(n||e)},a,a.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return e}()({1:[function(e,t,n){(function(n){"use strict";var i=e("./src/js/collection.js").Collection,r=e("component").createComponent;t.exports=r({name:"co-collection",constructor:i,localizationTemplate:n("i18n/{lang}.json")}),e("rivets").components[t.exports.name]=t.exports}).call(this,function(t){var n=e("settings"),i=n.components,r="";return i.replace(new RegExp("/$"),r)+"/co-collection/"+t.replace(new RegExp("^/"),r)})},{"./src/js/collection.js":9,component:3,rivets:"rivets",settings:"settings"}],2:[function(e,t,n){t.exports={localizationPath:"components/{name}/i18n/{lang}.json"}},{}],3:[function(e,t,n){"use strict";function i(e,t,n){c.components[e]=r(e,t,n)}function r(e,t,n){var i;"object"===("undefined"==typeof e?"undefined":u(e))?(i=e.name,t=e.constructor,n=e.localExtensions):i=e,t.prototype.localizationTemplate=e.localizationTemplate||d.localizationPath;var r={name:i,block:t.block,"static":o(t.prototype.defaults),template:t.prototype.template,constructor:t,initialize:function(e,n){var r=l.toCamelCaseObject(t.prototype.defaults),o=f(r,n,i),s=new t(e,o,this.view,this);return t.prototype.name=i,h.call(this,s,r,n.model||{}),s},unbind:function(){}};return n&&c._.extensions.forEach(function(e){var t=n[e];t&&(r[e]=t)}),r}function o(e){return Object.keys(e).filter(function(t){return s(e,t)}).map(function(e){return l.toCamelCase(e)})}function s(e,t){return e[t]&&e[t]["static"]}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=e("rivets"),l=e("utils"),a=e("./src/js/ComponentConstructor.js").ComponentConstructor,f=e("./src/js/buildModel.js"),h=e("./src/js/buildObservations.js"),d=e("./config.json");t.exports=i,t.exports.createComponent=r,t.exports.Component=a},{"./config.json":2,"./src/js/ComponentConstructor.js":4,"./src/js/buildModel.js":7,"./src/js/buildObservations.js":8,rivets:"rivets",utils:"utils"}],4:[function(e,t,n){"use strict";function i(e,t,n,i){this.element=e,this.parentScope=n.models,m.mixin(this,t),this.element.model=this,this.element.view={subscribe:d.bind(this)},this.element.setAttribute("co-component",""),this.model=t,this.view=n,this.binding=i,this.element.addEventListener("activate",o.bind(this)),this.element.addEventListener("deactivate",s.bind(this)),this.setIsConfigurable()}function r(e){var t=e.replace("co-","").split("-").join(" ");return t[0].toUpperCase()+t.substring(1,t.lenght)}function o(e){if("function"==typeof this.activate&&u(e)){var t=m.parse(this);this.activate(e.target),this.difference=m.difference(t,m.parse(this))}}function s(e){"function"==typeof this.deactivate&&u(e)&&this.deactivate(e.target),m.deepMixin(this,this.difference)}function u(e){return e.detail&&!!e.detail.isCobaltEvent}function c(e){return f(e).some(function(e){return a(e)})}function l(e){var t=e.element&&e.element.binders;return t&&Object.keys(t).some(function(e){return a(t[e].keypath)})}function a(e){return m.startsWith(e,"m.common")}function f(e,t){return t=t||[],e&&"function"==typeof e.getKeypath&&(t.push(e.getKeypath()),f(e.parentScope,t)),t}function h(e){return e.getAttribute("user-label")}function d(e){var t=this;g.subscribeEvent(function(n){n.type===g.EventType.DOM_REFRESHED&&n.element===t.element&&e(t.element)})}var p="undefined"==typeof Promise?e("es6-promise").Promise:Promise,m=e("utils"),b=e("./buildKeypath.js"),v=e("./buildLocalization.js"),y=e("general-model"),g=e("dispatcher");i.prototype.isCommon=function(){return c(this)||l(this)},i.prototype.getTextElementsByProperty=function(e){return m.toArray(this.element.querySelectorAll("[rv-html]")).filter(function(t){return t.getAttribute("rv-html")===e}).filter(function(e){return e.scope===this},this)},i.prototype.getLocalization=function(e){return v(this.__proto__.constructor,e)},i.prototype.getAbsoluteKeypath=function(){return b(this.parentScope,this.getKeypath())},i.prototype.getKeypath=function(){return this.element.getAttribute("model")||""},i.prototype.toJSON=function(){var e=this;return Object.keys(this).reduce(function(t,n){return e.model.hasOwnProperty(n)&&(t[n]=e[n]),t},{})},i.prototype.setIsConfigurable=function(){var e=this.getKeypath();Object.defineProperty(this,"isConfigurable",{value:m.startsWith(e,"m."),enumerable:!0,configurable:!1,writable:!0})},i.prototype.getLabel=function(e){return new p(function(t,n){var i=h(this.element);i?t(i):v(this.__proto__.constructor,e).then(function(e){t(e.name)})["catch"](function(e){t(r(this.name||this.element.tagName.toLowerCase()))}.bind(this))}.bind(this))},i.prototype.setLabel=function(e){this.element.setAttribute("user-label",e)},i.prototype.subscribe=function(e){return(new y.ModelNotifier).observe(this.model).subscribe(function(t){e(t)},!0)},n.ComponentConstructor=i},{"./buildKeypath.js":5,"./buildLocalization.js":6,dispatcher:"dispatcher","es6-promise":"es6-promise","general-model":"general-model",utils:"utils"}],5:[function(e,t,n){"use strict";function i(e,t){var n=s(t);return e?n?e+"."+s(t):e:t}function r(e,t){return t=t||[],e&&e.keypath&&(t.unshift(o(e),e.index),r(e.__proto__,t)),t}function o(e){return e.__proto__.keypath?s(e.keypath):e.keypath}function s(e){return e.split(".").slice(1).join(".")}t.exports=function(e,t){return i(r(e).join("."),t)}},{}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n="en",i=t||n;return o(e,i,n).then(function(t){return l(t.defaults,e.prototype.defaults,i).then(function(){return t})})}function o(e,t,n){var i=s(e,t);return u(i).then(function(i){if(c(i))return i;if(t!==n){var r=s(e,n);return u(r)}return p.resolve({})})}function s(e,t){return(0,f.template)(e.prototype.localizationTemplate,{name:e.prototype.name,lang:t})}function u(e){var t=!0,n=null;return m.isCache(e)||m.set(e,(0,a.loadJSON)(e,n,t)),m.get(e).then(function(e){return Object.assign({},e)})}function c(e){return e&&Object.keys(e).length}function l(e,t,n){var i=[],o=function(o){var s=t[o],u=void 0;if(s.sealed)return"continue";if(s.base)u=r(s.base,n).then(function(t){return e[o].defaults=t.defaults});else{if(!s.scheme)return"continue";u=l(e[o].defaults,s.scheme,n)}i.push(u)};for(var s in t){o(s)}return p.all(i)}var a=e("loader"),f=e("utils"),h=e("cache"),d=i(h),p="undefined"==typeof Promise?e("es6-promise").Promise:Promise,m=new d["default"];t.exports=r},{cache:"cache","es6-promise":"es6-promise",loader:"loader",utils:"utils"}],7:[function(e,t,n){"use strict";function i(e,t,n){var i=s(e),o=l.toCamelCaseObject(t.model||{}),c=u(e,t),a=r(r(i,o,e),c,e);return a}function r(e,t,n){return Object.keys(t).forEach(function(i){t.hasOwnProperty(i)&&c(t[i])&&n.hasOwnProperty(i)&&(e[i]&&e[i].constructor===Object&&o(n[i].value,t[i]),e[i]=t[i])}),e}function o(e,t){return Object.keys(e).forEach(function(n){t.hasOwnProperty(n)||(t[n]=e[n])})}function s(e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n].value,t},{})}function u(e,t){return Object.keys(e).reduce(function(n,i){return t.hasOwnProperty(i)&&(e[i]&&e[i]["static"]?n[i]=l.revive(t[i]):n[i]=t[i]),n},{})}function c(e){return void 0!==e&&null!==e}var l=e("utils");t.exports=i},{utils:"utils"}],8:[function(e,t,n){"use strict";function i(e,t){setTimeout(function(){(new s.ModelNotifier).deepObserve(t,e).subscribe(function(n){t.refresh(e)},!0)},50)}function r(e,t){var n=u.indexOf(e[t].type)!==-1;return n?n:Array.isArray(e[t].type)}function o(e,t){return!!e[t].refresh}var s=e("general-model"),u=[Object,Array,DataView,"Object","Array","DataView"];t.exports=function(e,t,n){Object.keys(t).forEach(function(s){n[s]=e[s],o(t,s)&&r(t,s)&&i(s,e),this.observe(e,s,function(){o(t,s)&&e.refresh(s),e.model[s]=e[s],n[s]=e[s]}),this.observe(e.model,s,function(){e[s]=e.model[s]}),this.observe(n,s,function(){e[s]=n[s]})},this)}},{"general-model":"general-model"}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){v["default"].adapters=m["default"].adapters,v["default"].root=m["default"].rootInterface}function c(e){return e.cloneNode(!0)}function l(e){return void 0!==e&&null!==e}function a(e,t,n){(0,h.isObject)(t)&&e.setAttribute("model",n)}Object.defineProperty(n,"__esModule",{value:!0}),n.Collection=void 0;var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=e("utils"),d=e("component"),p=e("rivets"),m=i(p),b=e("sightglass"),v=i(b);n.Collection=function(t){function n(e,t,i){r(this,n);var s=o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return s.iterated=[],s.observers=[],u(),s}return s(n,t),f(n,[{key:"init",value:function(){this.isPrerenderedCollection()?this.bindPrerenderedCollectionItems():(this.collectionItem=this.element.getElementsByTagName("co-collection-item")[0],this.element.removeChild(this.collectionItem),this.refresh())}},{key:"isPrerenderedCollection",value:function(){return this.element.hasAttribute("prerendered")}},{key:"ready",value:function(e){var t={};m["default"]._.extensions.forEach(function(n){t[n]=e[n]}),this.localExtensions=t,this.init()}},{key:"insert",value:function(e,t){this.checkPrerenderdMode();var n=Object.create(this.parentScope);Object.defineProperty(n,"index",{enumerable:!0,configurable:!0,writable:!0,value:t}),n[this.as]=e,n.keypath=this.getKeypath(function(e){return e+".items"})+"."+t;var i=c(this.collectionItem);a(i,e,n.keypath),this.element.insertBefore(i,this.element.children[t]),this.items.splice(t,0,e),this.iterated.splice(t,0,m["default"].bind(i,n,this.localExtensions)),this.updateIteratedIndexes()}},{key:"remove",value:function(e){this.checkPrerenderdMode();var t=this.element.children[e];this.iterated.splice(e,1),this.items.splice(e,1),t&&this.element.removeChild(t),this.updateIteratedIndexes()}},{key:"checkPrerenderdMode",value:function(){if(this.isPrerenderedCollection())return void console.warn(this.element,'Was prerendered while build and can not be chaned dynamically. Please set dynamic="true" attribute to enable runtime editing.')}},{key:"updateIteratedIndexes",value:function(){var e=this;this.items.forEach(function(t,n){e.iterated[n].models.index!==n&&(e.iterated[n].models.index=n)})}},{key:"template",value:function(){return e("../template.html")}},{key:"refresh",value:function(){this.buildCollectionElements(),this.buildIteratedViews()}},{key:"buildCollectionElements",value:function(){this.refreshObjectCollection()}},{key:"buildIteratedViews",value:function(){var e=0;if(this.iterated.length<=this.items.length&&!this.isNormalChildrenCount()&&this.collectionItem)for(;e<this.items.length;e++){var t=this.items[e],n=this.getKeypath(function(e){return e+".items"})+"."+e,i=this.buildCollectionItemModel(e,t);if(i.keypath?i.keypath=i.keypath+"."+this.removeAlias(n):i.keypath=n,l(this.iterated[e]))this.iterated[e].models[this.as]!==t?(this.buildObservations(this.parentScope,i),this.iterated[e].update(i)):this.iterated[e].models.index!==e&&(this.iterated[e].models.index=e);else{var r=c(this.collectionItem);this.buildObservations(this.parentScope,i),a(r,t,n),this.iterated.push(m["default"].bind(r,i,this.localExtensions)),this.element.appendChild(r)}}}},{key:"bindPrerenderedCollectionItems",value:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e],n=this.buildCollectionItemModel(e,t);this.buildObservations(this.parentScope,n),this.iterated.push(m["default"].bind(this.element.children[e],n,this.localExtensions))}}},{key:"buildCollectionItemModel",value:function(e,t){var n=Object.create(this.parentScope);return Object.defineProperty(n,"index",{enumerable:!0,configurable:!0,writable:!0,value:e}),n[this.as]=t,n.iteratedAlias=this.as,n}},{key:"buildObservations",value:function(e,t){var n=this,i=Object.keys(e).filter(function(t){return!!n.getDescriptor(e,t).get}).filter(function(e){return e!==n.as}).map(function(n){return(0,v["default"])(e,n,function(){t[n]=e[n]})});this.observers[t.index]&&this.unobserve(t.index),this.observers[t.index]=i}},{key:"getDescriptor",value:function(e,t){return Object.getOwnPropertyDescriptor(e,t)||{}}},{key:"unobserve",value:function(e){this.observers[e].forEach(function(e){return e.unobserve()})}},{key:"removeAlias",value:function(e){return e.split(".").slice(1).join(".")}},{key:"refreshObjectCollection",value:function(){var e=this;this.iterated.filter(function(t,n){return e.items.indexOf(t.models[e.as])===-1}).map(function(t){return e.iterated.splice(e.iterated.indexOf(t),1)[0]}).forEach(function(t){e.unobserve(t.models.index),t.unbind(),e.element.removeChild(t.els[0])})}},{key:"refreshPrimitiveCollection",value:function(){for(var e=new Array(this.iterated.length-this.items.length),t=0,n=void 0;t<e.length;t++)n=this.iterated.pop(),n.unbind(),this.element.removeChild(n.els[0])}},{key:"getKeypath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=this.getAttribute("model"),n=this.getAttribute("items");return t?e(t):n}},{key:"isNormalChildrenCount",value:function(){return this.items.length===this.element.children.length}},{key:"getAttribute",value:function(e){return this.element.getAttribute(e)}},{key:"defaults",get:function(){return{items:{value:[],type:Array,refresh:!0,sealed:!0},as:{value:"item",type:String,"static":!0}}}}],[{key:"block",get:function(){return!0}}]),n}(d.Component)},{"../template.html":10,component:3,rivets:"rivets",sightglass:"sightglass",utils:"utils"}],10:[function(e,t,n){t.exports='<content co-collection=""></content>'},{}]},{},[1]);