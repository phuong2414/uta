!function(){function t(e,n,i){function o(r,u){if(!n[r]){if(!e[r]){var a="function"==typeof require&&require;if(!u&&a)return a(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){var n=e[r][1][t];return o(n||t)},l,l.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}return t}()({1:[function(t,e,n){(function(n){"use strict";var i=t("./src/js/Select.js").Select,o=t("./src/js/Select.js").single,s=t("./src/js/Select.js").multiple,r=t("component").createComponent;e.exports=r({name:"co-select",constructor:i,localizationTemplate:n("i18n/{lang}.json")}),e.exports.single=o,e.exports.multiple=s,t("rivets").components[e.exports.name]=e.exports}).call(this,function(e){var n=t("settings"),i=n.components;return i+"/co-select/"+e})},{"./src/js/Select.js":10,component:4,rivets:"rivets",settings:"settings"}],2:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(){i(this,t),this.storage={}}return o(t,[{key:"set",value:function(t,e){this.storage[t]=e}},{key:"get",value:function(t){return this.storage[t]}},{key:"isCache",value:function(t){return Object.prototype.hasOwnProperty.call(this.storage,t)}}]),t}();e.exports=s},{}],3:[function(t,e,n){e.exports={localizationPath:"components/{name}/i18n/{lang}.json"}},{}],4:[function(t,e,n){"use strict";function i(t,e,n){a.components[t]=o(t,e,n)}function o(t,e,n){var i;"object"===("undefined"==typeof t?"undefined":u(t))?(i=t.name,e=t.constructor,n=t.localExtensions):i=t,e.prototype.localizationTemplate=t.localizationTemplate||h.localizationPath;var o={name:i,block:e.block,"static":s(e.prototype.defaults),template:e.prototype.template,constructor:e,initialize:function(t,n){var o=c.toCamelCaseObject(e.prototype.defaults),s=p(o,n,i),r=new e(t,s,this.view,this);return e.prototype.name=i,f.call(this,r,o,n.model||{}),r},unbind:function(){}};return n&&a._.extensions.forEach(function(t){var e=n[t];e&&(o[t]=e)}),o}function s(t){return Object.keys(t).filter(function(e){return r(t,e)}).map(function(t){return c.toCamelCase(t)})}function r(t,e){return t[e]&&t[e]["static"]}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=t("rivets"),c=t("utils"),l=t("./src/js/ComponentConstructor.js").ComponentConstructor,p=t("./src/js/buildModel.js"),f=t("./src/js/buildObservations.js"),h=t("./config.json");e.exports=i,e.exports.createComponent=o,e.exports.Component=l},{"./config.json":3,"./src/js/ComponentConstructor.js":5,"./src/js/buildModel.js":8,"./src/js/buildObservations.js":9,rivets:"rivets",utils:"utils"}],5:[function(t,e,n){"use strict";function i(t,e,n,i){this.element=t,this.parentScope=n.models,f.mixin(this,e),this.element.model=this,this.element.view={subscribe:l.bind(this)},this.element.setAttribute("co-component",""),this.model=e,this.view=n,this.binding=i,this.element.addEventListener("activate",s.bind(this)),this.element.addEventListener("deactivate",r.bind(this)),this.setIsConfigurable()}function o(t){var e=t.replace("co-","").split("-").join(" ");return e[0].toUpperCase()+e.substring(1,e.lenght)}function s(t){if("function"==typeof this.activate&&u(t)){var e=f.parse(this);this.activate(t.target),this.difference=f.difference(e,f.parse(this))}}function r(t){"function"==typeof this.deactivate&&u(t)&&this.deactivate(t.target),f.deepMixin(this,this.difference)}function u(t){return t.detail&&!!t.detail.isCobaltEvent}function a(t,e){return e=e||[],t&&"function"==typeof t.getKeypath&&(e.push(t.getKeypath()),a(t.parentScope,e)),e}function c(t){return t.getAttribute("user-label")}function l(t){var e=this;v.subscribeEvent(function(n){n.type===v.EventType.DOM_REFRESHED&&n.element===e.element&&t(e.element)})}var p="undefined"==typeof Promise?t("es6-promise").Promise:Promise,f=t("utils"),h=t("./buildKeypath.js"),d=t("./buildLocalization.js"),m=t("general-model"),v=t("dispatcher");i.prototype.isCommon=function(){return a(this).some(function(t){return f.startsWith(t,"m.common")})},i.prototype.getTextElementsByProperty=function(t){return f.toArray(this.element.querySelectorAll("[rv-html]")).filter(function(e){return e.getAttribute("rv-html")===t}).filter(function(t){return t.scope===this},this)},i.prototype.getLocalization=function(t){return d(this.__proto__.constructor,t)},i.prototype.getAbsoluteKeypath=function(){return h(this.parentScope,this.getKeypath())},i.prototype.getKeypath=function(){return this.element.getAttribute("model")||""},i.prototype.toJSON=function(){var t=this;return Object.keys(this).reduce(function(e,n){return t.model.hasOwnProperty(n)&&(e[n]=t[n]),e},{})},i.prototype.setIsConfigurable=function(){var t=this.getKeypath();Object.defineProperty(this,"isConfigurable",{value:f.startsWith(t,"m."),enumerable:!0,configurable:!1,writable:!0})},i.prototype.getLabel=function(t){return new p(function(e,n){var i=c(this.element);i?e(i):d(this.__proto__.constructor,t).then(function(t){e(t.name)})["catch"](function(t){e(o(this.name||this.element.tagName.toLowerCase()))}.bind(this))}.bind(this))},i.prototype.setLabel=function(t){this.element.setAttribute("user-label",t)},i.prototype.subscribe=function(t){return(new m.ModelNotifier).observe(this.model).subscribe(function(e){t(e)},!0)},n.ComponentConstructor=i},{"./buildKeypath.js":6,"./buildLocalization.js":7,dispatcher:"dispatcher","es6-promise":"es6-promise","general-model":"general-model",utils:"utils"}],6:[function(t,e,n){"use strict";function i(t,e){var n=r(e);return t?n?t+"."+r(e):t:e}function o(t,e){return e=e||[],t&&t.keypath&&(e.unshift(s(t),t.index),o(t.__proto__,e)),e}function s(t){return t.__proto__.keypath?r(t.keypath):t.keypath}function r(t){return t.split(".").slice(1).join(".")}e.exports=function(t,e){return i(o(t).join("."),e)}},{}],7:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n="en",i=e||n;return s(t,i,n).then(function(e){return c(e.defaults,t.prototype.defaults,i).then(function(){return e})})}function s(t,e,n){var i=r(t,e);return u(i).then(function(i){if(a(i))return i;if(e!==n){var o=r(t,n);return u(o)}return d.resolve({})})}function r(t,e){return(0,p.template)(t.prototype.localizationTemplate,{name:t.prototype.name,lang:e})}function u(t){var e=!0,n=null;return m.isCache(t)||m.set(t,(0,l.loadJSON)(t,n,e)),m.get(t)}function a(t){return t&&Object.keys(t).length}function c(t,e,n){var i=[],s=function(s){var r=e[s],u=void 0;if(r.sealed)return"continue";if(r.base)u=o(r.base,n).then(function(e){return t[s].defaults=e.defaults});else{if(!r.scheme)return"continue";u=c(t[s].defaults,r.scheme,n)}i.push(u)};for(var r in e){s(r)}return d.all(i)}var l=t("loader"),p=t("utils"),f=t("cache"),h=i(f),d="undefined"==typeof Promise?t("es6-promise").Promise:Promise,m=new h["default"];e.exports=o},{cache:2,"es6-promise":"es6-promise",loader:"loader",utils:"utils"}],8:[function(t,e,n){"use strict";function i(t,e,n){var i=r(t),s=c.toCamelCaseObject(e.model||{}),a=u(t,e),l=o(o(i,s,t),a,t);return l}function o(t,e,n){return Object.keys(e).forEach(function(i){e.hasOwnProperty(i)&&a(e[i])&&n.hasOwnProperty(i)&&(t[i]&&t[i].constructor===Object&&s(n[i].value,e[i]),t[i]=e[i])}),t}function s(t,e){return Object.keys(t).forEach(function(n){e.hasOwnProperty(n)||(e[n]=t[n])})}function r(t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n].value,e},{})}function u(t,e){return Object.keys(t).reduce(function(n,i){return e.hasOwnProperty(i)&&(t[i]&&t[i]["static"]?n[i]=c.revive(e[i]):n[i]=e[i]),n},{})}function a(t){return void 0!==t&&null!==t}var c=t("utils");e.exports=i},{utils:"utils"}],9:[function(t,e,n){"use strict";function i(t,e){setTimeout(function(){(new r.ModelNotifier).deepObserve(e,t).subscribe(function(n){e.refresh(t)},!0)},50)}function o(t,e){var n=u.indexOf(t[e].type)!==-1;return n?n:Array.isArray(t[e].type)}function s(t,e){return!!t[e].refresh}var r=t("general-model"),u=[Object,Array,DataView,"Object","Array","DataView"];e.exports=function(t,e,n){Object.keys(e).forEach(function(r){n[r]=t[r],s(e,r)&&o(e,r)&&i(r,t),this.observe(t,r,function(){s(e,r)&&t.refresh(r),t.model[r]=t[r],n[r]=t[r]}),this.observe(t.model,r,function(){t[r]=t.model[r]}),this.observe(n,r,function(){t[r]=n[r]})},this)}},{"general-model":"general-model"}],10:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.multiple=n.single=n.Select=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("component"),c=t("./multiple.js"),l=i(c),p=t("./single.js"),f=i(p),h=t("utils"),d=i(h),m=t("./utils.js"),v=i(m),y=function(e){function n(t,e){o(this,n);var i=s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return d.mixin(i,i.multiple?l:f),i}return r(n,e),u(n,[{key:"addEventListeners",value:function(){var t=this;setTimeout(function(){t.init(),v.isThisComponentInCheckbox(t.element)||t.element.addEventListener("option-tap",t.onOptionTapLocalListener.bind(t)),t.element.addEventListener("option-change",t.onOptionChangeLocalListener.bind(t))},0)}},{key:"ready",value:function(){v.observe(this.element,{childList:!0,subtree:!0},this.reInitSelect.bind(this)),this.addEventListeners()}},{key:"reInitSelect",value:function(t){if(t.length>=1&&this.options){var e=v.getCoOptionFromCollectionItemInMutations(t[0].removedNodes),n=v.getCoOptionFromCollectionItemInMutations(t[0].addedNodes),i=e?this.getIndexActiveOption(e.model):-1;this.options=v.getOptions(this.element),this.optionsRefresh(this.selected||this.selectedValues,this.options,n,e,i)}else this.options=v.getOptions(this.element)}},{key:"getIndexActiveOption",value:function(t){return this.options.indexOf(t)}},{key:"template",value:function(){return t("../template.html")}},{key:"dispatchEvent",value:function(t,e){d.dispatchEvent(this.element,t,e)}},{key:"onOptionChangeLocalListener",value:function(){this.onOptionChange.apply(this,arguments)}},{key:"onOptionTapLocalListener",value:function(){this.onOptionTap.apply(this,arguments)}},{key:"refresh",value:function(t){switch(t){case"multiple":this.clearAllData(),d.mixin(this,this.multiple?l:f);break;default:this._refresh(t)}}},{key:"getOptionByValue",value:function(t){var e=void 0;return this.options&&this.options.some(function(n){return n&&n.value===t&&(e=n)}),e||null}},{key:"clearAllData",value:function(){var t=this;Object.keys(this.defaults).forEach(function(e){"multiple"!==e&&(t[d.toCamelCase(e)]=t.defaults[e].value)})}},{key:"defaults",get:function(){return{multiple:{type:Boolean,value:!1,refresh:!0},"selected-values":{type:Array,value:[],refresh:!0},selected:{type:String,value:"",refresh:!0},index:{type:Number,value:-1,refresh:!0},"options-index":{type:Array,value:[],refresh:!0,sealed:!0}}}}]),n}(a.Component);n.Select=y,n.single=f,n.multiple=l},{"../template.html":14,"./multiple.js":11,"./single.js":12,"./utils.js":13,component:4,utils:"utils"}],11:[function(t,e,n){"use strict";n.init=function(){this.optionsIndex.length>0?this._refresh("optionsIndex"):this._refresh("selectedValues")},n.optionsRefresh=function(t,e,n,i,o){var s=void 0;i&&this.removeActiveOption(o),n&&(s=this.options.indexOf(n.model),this.addedNewCollectionUpper(s))},n.removeActiveOption=function(t){var e=this.optionsIndex.filter(function(e){return t!==e}).map(function(e,n){return t>-1&&e>t?--e:e});this.optionsIndex=e},n.addedNewCollectionUpper=function(t){var e,n=this.optionsIndex.map(function(n){return t<=n?(e=!0,++n):n});e&&(this.optionsIndex=n)},n.onOptionTap=function(t){var e=t.detail;e.toggle(),t.stopPropagation()},n.onOptionChange=function(t){var e=t.detail,n=this.options.indexOf(e),i=void 0;this.optionsIndexStateLocalChange||(i=this.optionsIndex.indexOf(n),~i?this.optionsIndex.splice(i,1):this.optionsIndex.push(n)),this.optionsIndexStateLocalChange=!1,t.stopPropagation()},n._refresh=function(t,e){var n=this;switch(t){case"optionsIndex":var i=void 0,o=[];this.options.forEach(function(t,e){n.optionsIndexStateLocalChange=!0,~n.optionsIndex.indexOf(e)?(t.select(),~n.selectedValues.indexOf(t.value)||(i=!0),o.push(t.value)):(t.unselect(),~n.selectedValues.indexOf(t.value)&&(i=!0))}),(i||this.selectedValues.length!==this.optionsIndex.length)&&(this.selectedValues=o,this.dispatchEvent("change",{detail:this.selectedValues})),this.optionsIndexStateLocalChange=!1;break;case"selectedValues":var s=void 0,r=[],u=void 0,a=void 0,c=this.getValuesByIndexAll();this.selectedValues.forEach(function(t,e){u=c.indexOf(t),~u||(s=!0),a=n.options.indexOf(n.getOptionByValue(t)),~a&&r.push(a)}),s||(s=c.some(function(t){return!~n.selectedValues.indexOf(t)})),s&&(this.optionsIndex=r)}},n.getValuesByIndexAll=function(){var t=this;return this.optionsIndex.map(function(e){return t.options[e].value})}},{}],12:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){t.forEach(function(t){t.unselect()})}var s=t("utils"),r=(i(s),t("./utils.js"));i(r);n.init=function(){o(this.options),~this.index?this._refresh("index"):this.selected&&this._refresh("selected")},n.optionsRefresh=function(t,e,n,i,o){n?(n.model.unselect(),this.index>-1&&this.options.indexOf(n.model)<=this.index&&this.index++):this.index>-1&&o>-1&&o===this.index&&(this.index=this.lastIndex=-1,this.selected="")},n.onOptionTap=function(t){var e=t.detail;this.tap=!0,e.selected||e.select()},n.onOptionChange=function(t){var e=t.detail,n=this.options.indexOf(e);this.tap||this.index==n&&(this.index=this.lastIndex=-1,this.selected=""),this.lastIndex==n||this.options[n].model.selected||(this.lastIndex=this.index,this.index=n),this.tap=!1,t.stopPropagation()},n._refresh=function(t){switch(t){case"index":this.unselectLastActive(this.lastIndex),this.selectNewItemByIndex(this.index);break;case"selected":if(this.index>=0&&this.index<this.options.length&&this.options[this.index].value==this.selected)return;var e=this.getOptionByValue(this.selected);this.index=this.options.indexOf(e)}},n.unselectLastActive=function(){this.lastIndex>-1&&this.options[this.lastIndex]&&this.options[this.lastIndex].unselect()},n.selectNewItemByIndex=function(t){t>-1&&t<this.options.length?(this.options[t].select(),this.selected=this.options[t].value,this.dispatchEvent("change",{detail:this.selected}),this.lastIndex=t):this.lastIndex=-1}},{"./utils.js":13,utils:"utils"}],13:[function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t.hasAttribute("co-component")}var s=t("utils"),r=i(s);e.exports.observe=function(t,e,n){new MutationObserver(function(t){n(t)}).observe(t,e),n([])},e.exports.getOptions=function(t){return r.toArray(t.getElementsByTagName("co-option")).map(function(t){return t.model}).filter(function(t){return t})},e.exports.isThisComponentInCheckbox=function(t){return"CO-CHECKBOX-GROUP"==t.parentElement.tagName||"CO-CHECKBOXES"==t.parentElement.tagName},e.exports.getCoOptionFromCollectionItemInMutations=function(t){return!(!t.length||"CO-COLLECTION-ITEM"!=t[0].tagName)&&t[0].querySelector("co-option")},e.exports.isCollectionLoad=function(t){return!(t&&t.children.length>0)||o(t.children[0])}},{utils:"utils"}],14:[function(t,e,n){e.exports='<content co-select=""></content>'},{}]},{},[1]);