var loader = require('loader')
var params = require('params')
var utils = require('utils')
var structureJSON = params.structure || 'structure.json'
var appJSON = params.settings || 'app/settings/app.json'
var settings = loader.loadJSONSync(appJSON)
var structure = loader.loadJSONSync(structureJSON)
var api = require('./api')

if (params.settings) {
  settings.slides = ''
}

module.exports = settings
module.exports._api = api(settings, structure)
module.exports._env = utils.mixin({
  currentClm: 'dev'
}, settings._env || {})
