!function(){function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}return e}()({1:[function(e,t,n){(function(n){"use strict";var i=e("./src/js/shower").Shower,o=e("component").createComponent;t.exports=o({name:"co-shower",constructor:i,localExtensions:{binders:{"animate-binder":e("animate-binder")}},localizationTemplate:n("i18n/{lang}.json")}),e("rivets").components[t.exports.name]=t.exports}).call(this,function(t){var n=e("settings"),i=n.components,o="";return i.replace(new RegExp("/$"),o)+"/co-shower/"+t.replace(new RegExp("^/"),o)})},{"./src/js/shower":11,"animate-binder":"animate-binder",component:4,rivets:"rivets",settings:"settings"}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.storage={}}return o(e,[{key:"set",value:function(e,t){this.storage[e]=t}},{key:"get",value:function(e){return this.storage[e]}},{key:"isCache",value:function(e){return Object.prototype.hasOwnProperty.call(this.storage,e)}}]),e}();t.exports=r},{}],3:[function(e,t,n){t.exports={localizationPath:"components/{name}/i18n/{lang}.json"}},{}],4:[function(e,t,n){"use strict";function i(e,t,n){u.components[e]=o(e,t,n)}function o(e,t,n){var i;"object"===("undefined"==typeof e?"undefined":a(e))?(i=e.name,t=e.constructor,n=e.localExtensions):i=e,t.prototype.localizationTemplate=e.localizationTemplate||d.localizationPath;var o={name:i,block:t.block,"static":r(t.prototype.defaults),template:t.prototype.template,constructor:t,initialize:function(e,n){var o=l.toCamelCaseObject(t.prototype.defaults),r=h(o,n,i),s=new t(e,r,this.view,this);return t.prototype.name=i,f.call(this,s,o,n.model||{}),s},unbind:function(){}};return n&&u._.extensions.forEach(function(e){var t=n[e];t&&(o[e]=t)}),o}function r(e){return Object.keys(e).filter(function(t){return s(e,t)}).map(function(e){return l.toCamelCase(e)})}function s(e,t){return e[t]&&e[t]["static"]}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=e("rivets"),l=e("utils"),c=e("./src/js/ComponentConstructor.js").ComponentConstructor,h=e("./src/js/buildModel.js"),f=e("./src/js/buildObservations.js"),d=e("./config.json");t.exports=i,t.exports.createComponent=o,t.exports.Component=c},{"./config.json":3,"./src/js/ComponentConstructor.js":5,"./src/js/buildModel.js":8,"./src/js/buildObservations.js":9,rivets:"rivets",utils:"utils"}],5:[function(e,t,n){"use strict";function i(e,t,n,i){this.element=e,this.parentScope=n.models,m.mixin(this,t),this.element.model=this,this.element.view={subscribe:d.bind(this)},this.element.setAttribute("co-component",""),this.model=t,this.view=n,this.binding=i,this.element.addEventListener("activate",r.bind(this)),this.element.addEventListener("deactivate",s.bind(this)),this.setIsConfigurable()}function o(e){var t=e.replace("co-","").split("-").join(" ");return t[0].toUpperCase()+t.substring(1,t.lenght)}function r(e){if("function"==typeof this.activate&&a(e)){var t=m.parse(this);this.activate(e.target),this.difference=m.difference(t,m.parse(this))}}function s(e){"function"==typeof this.deactivate&&a(e)&&this.deactivate(e.target),m.deepMixin(this,this.difference)}function a(e){return e.detail&&!!e.detail.isCobaltEvent}function u(e){return h(e).some(function(e){return c(e)})}function l(e){var t=e.element&&e.element.binders;return t&&Object.keys(t).some(function(e){return c(t[e].keypath)})}function c(e){return m.startsWith(e,"m.common")}function h(e,t){return t=t||[],e&&"function"==typeof e.getKeypath&&(t.push(e.getKeypath()),h(e.parentScope,t)),t}function f(e){return e.getAttribute("user-label")}function d(e){var t=this;w.subscribeEvent(function(n){n.type===w.EventType.DOM_REFRESHED&&n.element===t.element&&e(t.element)})}var p="undefined"==typeof Promise?e("es6-promise").Promise:Promise,m=e("utils"),v=e("./buildKeypath.js"),b=e("./buildLocalization.js"),y=e("general-model"),w=e("dispatcher");i.prototype.isCommon=function(){return u(this)||l(this)},i.prototype.getTextElementsByProperty=function(e){return m.toArray(this.element.querySelectorAll("[rv-html]")).filter(function(t){return t.getAttribute("rv-html")===e}).filter(function(e){return e.scope===this},this)},i.prototype.getLocalization=function(e){return b(this.__proto__.constructor,e)},i.prototype.getAbsoluteKeypath=function(){return v(this.parentScope,this.getKeypath())},i.prototype.getKeypath=function(){return this.element.getAttribute("model")||""},i.prototype.toJSON=function(){var e=this;return Object.keys(this).reduce(function(t,n){return e.model.hasOwnProperty(n)&&(t[n]=e[n]),t},{})},i.prototype.setIsConfigurable=function(){var e=this.getKeypath();Object.defineProperty(this,"isConfigurable",{value:m.startsWith(e,"m."),enumerable:!0,configurable:!1,writable:!0})},i.prototype.getLabel=function(e){return new p(function(t,n){var i=f(this.element);i?t(i):b(this.__proto__.constructor,e).then(function(e){t(e.name)})["catch"](function(e){t(o(this.name||this.element.tagName.toLowerCase()))}.bind(this))}.bind(this))},i.prototype.setLabel=function(e){this.element.setAttribute("user-label",e)},i.prototype.subscribe=function(e){return(new y.ModelNotifier).observe(this.model).subscribe(function(t){e(t)},!0)},n.ComponentConstructor=i},{"./buildKeypath.js":6,"./buildLocalization.js":7,dispatcher:"dispatcher","es6-promise":"es6-promise","general-model":"general-model",utils:"utils"}],6:[function(e,t,n){"use strict";function i(e,t){var n=s(t);return e?n?e+"."+s(t):e:t}function o(e,t){return t=t||[],e&&e.keypath&&(t.unshift(r(e),e.index),o(e.__proto__,t)),t}function r(e){return e.__proto__.keypath?s(e.keypath):e.keypath}function s(e){return e.split(".").slice(1).join(".")}t.exports=function(e,t){return i(o(e).join("."),t)}},{}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n="en",i=t||n;return r(e,i,n).then(function(t){return l(t.defaults,e.prototype.defaults,i).then(function(){return t})})}function r(e,t,n){var i=s(e,t);return a(i).then(function(i){if(u(i))return i;if(t!==n){var o=s(e,n);return a(o)}return p.resolve({})})}function s(e,t){return(0,h.template)(e.prototype.localizationTemplate,{name:e.prototype.name,lang:t})}function a(e){var t=!0,n=null;return m.isCache(e)||m.set(e,(0,c.loadJSON)(e,n,t)),m.get(e).then(function(e){return Object.assign({},e)})}function u(e){return e&&Object.keys(e).length}function l(e,t,n){var i=[],r=function(r){var s=t[r],a=void 0;if(s.sealed)return"continue";if(s.base)a=o(s.base,n).then(function(t){return e[r].defaults=t.defaults});else{if(!s.scheme)return"continue";a=l(e[r].defaults,s.scheme,n)}i.push(a)};for(var s in t){r(s)}return p.all(i)}var c=e("loader"),h=e("utils"),f=e("cache"),d=i(f),p="undefined"==typeof Promise?e("es6-promise").Promise:Promise,m=new d["default"];t.exports=o},{cache:2,"es6-promise":"es6-promise",loader:"loader",utils:"utils"}],8:[function(e,t,n){"use strict";function i(e,t,n){var i=s(e),r=l.toCamelCaseObject(t.model||{}),u=a(e,t),c=o(o(i,r,e),u,e);return c}function o(e,t,n){return Object.keys(t).forEach(function(i){t.hasOwnProperty(i)&&u(t[i])&&n.hasOwnProperty(i)&&(e[i]&&e[i].constructor===Object&&r(n[i].value,t[i]),e[i]=t[i])}),e}function r(e,t){return Object.keys(e).forEach(function(n){t.hasOwnProperty(n)||(t[n]=e[n])})}function s(e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n].value,t},{})}function a(e,t){return Object.keys(e).reduce(function(n,i){return t.hasOwnProperty(i)&&(e[i]&&e[i]["static"]?n[i]=l.revive(t[i]):n[i]=t[i]),n},{})}function u(e){return void 0!==e&&null!==e}var l=e("utils");t.exports=i},{utils:"utils"}],9:[function(e,t,n){"use strict";function i(e,t){setTimeout(function(){(new s.ModelNotifier).deepObserve(t,e).subscribe(function(n){t.refresh(e)},!0)},50)}function o(e,t){var n=a.indexOf(e[t].type)!==-1;return n?n:Array.isArray(e[t].type)}function r(e,t){return!!e[t].refresh}var s=e("general-model"),a=[Object,Array,DataView,"Object","Array","DataView"];t.exports=function(e,t,n){Object.keys(t).forEach(function(s){n[s]=e[s],r(t,s)&&o(t,s)&&i(s,e),this.observe(e,s,function(){r(t,s)&&e.refresh(s),e.model[s]=e[s],n[s]=e[s]}),this.observe(e.model,s,function(){e[s]=e.model[s]}),this.observe(n,s,function(){e[s]=n[s]})},this)}},{"general-model":"general-model"}],10:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.EventManager=function(){function e(t){i(this,e),this.handler=t.bind(t),this.events=[]}return o(e,[{key:"updateListeners",value:function(e){this.removeUnusedListeners(e),this.addListeners(e)}},{key:"addListeners",value:function(e){var t=this;e.forEach(function(e){t.events.indexOf(e)<0&&(document.addEventListener(e,t.handler),t.events.push(e))})}},{key:"removeUnusedListeners",value:function(e){var t=this;this.events=this.events.filter(function(n){return!(e.indexOf(n)<0)||(document.removeEventListener(n,t.handler),!1)})}}]),e}()},{}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Shower=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("component"),c=e("utils"),h=o(c),f=e("prefixer"),d=e("nav"),p=i(d),m=e("animate-binder"),v=i(m),b=e("./event-manager"),y=e("dispatcher"),w=i(y);n.Shower=function(t){function n(){r(this,n);var e=s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.saveEvent=null,e.animationModel={},e.show=function(t){return e.showHandler(t)},e.hide=function(t){return e.hideHandler(t)},e.allowHide=h.debounce(function(){e.forbidHide=!1},25),e.showManager=new b.EventManager(e.show),e.hideManager=new b.EventManager(e.hide),e.element.addEventListener(f.events.animationstart,e),e.element.addEventListener(f.events.animationend,e),p["default"].onenter(function(){e.isOnleave=!1}),p["default"].onleave(function(){e.isOnleave=!0,e.isAnimate=!1}),e.element.addEventListener("tap",e),e.updateShowGlobalEvents(),e.updateHideGlobalEvents(),e.element.addEventListener("show",function(e){return e.stopPropagation()}),e.element.addEventListener("hide",function(e){return e.stopPropagation()}),e.setOutsideClose(),e[e.showOnSlideEnter?"showElement":"hideElement"](),e.blockDispatcher||e.subscribeDispatcher(),document.addEventListener("resetModel",function(){e.visible=e.showOnSlideEnter}),e}return a(n,t),u(n,[{key:"ready",value:function(e){var t=this.element.getAttribute("fixed")?this.element.getAttribute("fixed")+",animation":"animation";this.element.setAttribute("fixed",t),e.addBinding(this.element,"animate","animationModel"),this.animationModel.blockDispatcher=this.showAnimation.blockDispatcher||this.hideAnimation.blockDispatcher}},{key:"subscribeDispatcher",value:function(){var e=this;w["default"].subscribeAction(function(t){switch(t.type){case w["default"].ActionType.EDIT_PRESENTATION:e.visible=e.showOnSlideEnter,e.saveStateVisible=e.visible;break;case w["default"].ActionType.VIEW_PRESENTATION:e.deactivate(),setTimeout(function(t){e.visible=e.showOnSlideEnter},100)}})}},{key:"activate",value:function(){this.saveStateVisible=this.visible,this.visible=!0,this.showElement()}},{key:"deactivate",value:function(){this.visible=this.saveStateVisible,this.visible||this.hideElement()}},{key:"showHandler",value:function(e){this.saveEvent===e||this.visible||(this.visible=!0,this.saveEvent=e)}},{key:"hideHandler",value:function(e){this.saveEvent!==e&&this.visible&&!this.forbidHide&&(this.visible=!1,this.lockSwipeWhenOpened&&p["default"].unlock(),this.saveEvent=e)}},{key:"template",value:function(){return e("../template.html")}},{key:"handleEvent",value:function(e){switch(e.type){case"tap":e.stopPropagation();break;case"animationstart":case"webkitAnimationStart":e.target===this.element&&(this.isAnimate=!0,this.showElement());break;case"animationend":case"webkitAnimationEnd":e.target===this.element&&(this.isAnimate=!1,this.hideElement())}}},{key:"refresh",value:function(e){switch(e){case"visible":(this.element.binders.animate.isEditMode||this.isOnleave)&&(this[e]?this.showElement():this.hideElement()),this.animateContainer();break;case"hideOnOutsideTap":this.setOutsideClose();break;case"showOn":this.updateShowGlobalEvents();break;case"hideOn":this.updateHideGlobalEvents()}}},{key:"animateContainer",value:function(){this.visible?this.showContainer():this.hideContainer()}},{key:"isWithoutAnimation",value:function(e){return!e.name||e.disabled}},{key:"showContainer",value:function(){this.forbidHide=!0,this.allowHide(),this.isWithoutAnimation(this.showAnimation)&&(this.showElement(),this.disableAnimation()),this.animateElement(this.showAnimation),h.dispathEvent(this.element,"show",{cancelable:!0})}},{key:"hideContainer",value:function(){this.isWithoutAnimation(this.hideAnimation)&&(this.hideElement(),this.disableAnimation()),this.animateElement(this.hideAnimation),h.dispathEvent(this.element,"hide",{cancelable:!0})}},{key:"disableAnimation",value:function(){this.animationModel.name="",this.animationModel.disabled=!0}},{key:"animateElement",value:function(e){this.animationModel.delay=e.delay,this.animationModel.duration=e.duration,this.animationModel.disabled=e.disabled,h.mixin(this.animationModel,e)}},{key:"showElement",value:function(){this.visible&&this.element.classList.add("visible")}},{key:"hideElement",value:function(){this.visible||this.element.classList.remove("visible")}},{key:"updateShowGlobalEvents",value:function(){this.showManager.updateListeners(this.getEvents("showOn"))}},{key:"updateHideGlobalEvents",value:function(){this.hideManager.updateListeners(this.getEvents("hideOn"))}},{key:"getEvents",value:function(e){return this[e]?this[e].split(" "):[]}},{key:"setOutsideClose",value:function(){document[this.hideOnOutsideTap?"addEventListener":"removeEventListener"]("tap",this.hide)}},{key:"defaults",get:function(){return{visible:{value:!1,type:Boolean,refresh:!0},showOnSlideEnter:{value:!1,type:Boolean,optional:!0},"show-on":{value:"show",type:String,refresh:!0,optional:!0},"hide-on":{value:"hide",type:String,refresh:!0,optional:!0},"show-animation":{value:{name:"fadeIn",duration:.5,delay:0,disabled:!1,infinite:!1,on:"",initVisibility:!1,blockDispatcher:!1},scheme:v["default"].prototype.defaults,base:v["default"],type:Object},"hide-animation":{value:{name:"fadeOut",duration:.5,delay:0,disabled:!1,infinite:!1,on:"",initVisibility:!0,blockDispatcher:!1},scheme:v["default"].prototype.defaults,base:v["default"],type:Object},"hide-on-outside-tap":{value:!1,type:Boolean,refresh:!0,optional:!0},"lock-swipe-when-opened":{value:!1,type:Boolean}}}}]),n}(l.Component)},{"../template.html":12,"./event-manager":10,"animate-binder":"animate-binder",component:4,dispatcher:"dispatcher",nav:"nav",prefixer:"prefixer",utils:"utils"}],12:[function(e,t,n){t.exports="<content co-shower></content>"},{}]},{},[1]);