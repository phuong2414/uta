import * as utils from 'utils';
import {Component} from 'component';


export class Option extends Component {
	constructor(element) {
		super(...arguments);

		this.element.addEventListener("tap", () => {
			utils.dispatchEvent(element, 'option-tap', {detail: this});
		});
	}

	get defaults() {
		return {
			"value": {
				value: "",
				type: String
			},
			"displayed-value": {
				value: "",
				type: String
			},
			"selected": {
				value: false,
				type: Boolean,
				refresh: true,
				sealed: true
			}
		};
	}

	template() {
		return require('../template.html');
	}

	refresh(attrName) {
		switch(attrName){
			case 'selected':
				this.element.classList[this.selected ? 'add' : 'remove']('selected');
				utils.dispatchEvent(this.element, 'option-change', {detail: this});
				break;
		}
	}

	select() {
		this.selected = true;
	}

	unselect() {
		this.selected = false;
	}

	toggle() {
		return this.selected = !this.selected;
	}
}