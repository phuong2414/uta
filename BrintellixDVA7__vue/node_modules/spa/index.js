window.isSPA = true

var presentationIdentifier = require('presentation-identifier')
var initialCommonModelKey = presentationIdentifier + '-initialCommonModel'
var slideshowPopupKey = presentationIdentifier + 'SlideshowPopup'
var structure = require('structure')
var storageKeyboardNavKey = 'keyboard-navigation'
var Navigator

window.addEventListener('DOMContentLoaded', function () {
  window.sessionStorage.removeItem(slideshowPopupKey)
  window.sessionStorage.removeItem(presentationIdentifier)
  window.sessionStorage.removeItem(initialCommonModelKey)
  window.sessionStorage.removeItem(storageKeyboardNavKey)
})

if (structure.loadJSONStructure) {
  structure.loadJSONStructure()
  structure.publish('update')
}

Navigator = require('./src/navigator.js')
require('polyfill')

module.exports = new Navigator('viewport')
