!function(){function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n||e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return e}()({1:[function(e,t,n){(function(n){"use strict";var i=e("component").createComponent,r=e("./src/js/VideoPlayer.js").VideoPlayer;t.exports=i({name:"co-video",constructor:r,localizationTemplate:n("i18n/{lang}.json"),localExtensions:{components:{"co-slider":e("co-slider")},binders:{playing:e("playing")}}}),e("rivets").components[t.exports.name]=t.exports}).call(this,function(t){var n=e("settings"),i=n.components,r="";return i.replace(new RegExp("/$"),r)+"/co-video/"+t.replace(new RegExp("^/"),r)})},{"./src/js/VideoPlayer.js":18,"co-slider":7,component:11,playing:17,rivets:"rivets",settings:"settings"}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.storage={}}return r(e,[{key:"set",value:function(e,t){this.storage[e]=t}},{key:"get",value:function(e){return this.storage[e]}},{key:"isCache",value:function(e){return Object.prototype.hasOwnProperty.call(this.storage,e)}}]),e}();t.exports=o},{}],3:[function(e,t,n){(function(n){"use strict";var i=e("component").createComponent,r=e("./src/js/Container.js").Container;t.exports=i({name:"co-container",constructor:r,localizationTemplate:n("i18n/{lang}.json")})}).call(this,function(t){var n=e("settings"),i=n.components,r="";return i.replace(new RegExp("/$"),r)+"/co-video/_assets/co-container/"+t.replace(new RegExp("^/"),r)})},{"./src/js/Container.js":4,component:11,settings:"settings"}],4:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Container=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("component"),c=e("dispatcher"),p=r(c),f=e("./utils.js"),d=i(f),h="hidden-element",m="highlighted",v="empty";n.Container=function(t){function n(){o(this,n);var e=s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return"false"===e.element.getAttribute("container")?e.element.removeAttribute("container"):e.element.setAttribute("container","true"),e.subscribeAction=p["default"].subscribeAction(function(t){console.log(t.type),t.type===p["default"].ActionType.EDIT_PRESENTATION?e.element.classList.add(m):t.type===p["default"].ActionType.VIEW_PRESENTATION&&e.element.classList.remove(m)}),e.addEmptyClass(),d.observe(e.element,{childList:!0,subtree:!0},e.addEmptyClass.bind(e)),e}return a(n,t),l(n,[{key:"getChilds",value:function(){var e=this.element.children;return Array.from(e).filter(function(e){return e.model}).filter(function(e){return!e.classList.contains(h)})}},{key:"addEmptyClass",value:function(){this.element.classList[this.getChilds().length?"remove":"add"](v)}},{key:"unbind",value:function(){this.subscribeAction.unsubscribe()}},{key:"template",value:function(){return e("../template.html")}},{key:"defaults",get:function(){return{}}}]),n}(u.Component)},{"../template.html":6,"./utils.js":5,component:11,dispatcher:"dispatcher"}],5:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var r=e("utils");i(r);t.exports.observe=function(e,t,n){new MutationObserver(function(e){n(e)}).observe(e,t),n([])}},{utils:"utils"}],6:[function(e,t,n){t.exports="<content co-container></content>"},{}],7:[function(e,t,n){(function(n){"use strict";var i=e("component").createComponent,r=e("./src/js/slider.js").Slider;e("rivets");t.exports=i({name:"co-slider",constructor:r,localExtensions:{components:{"co-container":e("co-container")}},localizationTemplate:n("i18n/{lang}.json")})}).call(this,function(t){var n=e("settings"),i=n.components,r="";return i.replace(new RegExp("/$"),r)+"/co-video/_assets/co-slider/"+t.replace(new RegExp("^/"),r)})},{"./src/js/slider.js":8,"co-container":3,component:11,rivets:"rivets",settings:"settings"}],8:[function(e,t,n){"use strict";function i(e){a.apply(this,Array.prototype.slice.call(arguments)),this.filler=this.element.querySelector(".slider-fill"),["value","disabled"].forEach(function(e){Object.defineProperty(this.element,e,{get:function(){return this[e]}.bind(this),set:function(t){this[e]=t}.bind(this)})},this)}var r=e("touch"),o=e("utils"),s=e("rivets"),a=(e("prefixer"),e("component").Component);s.binders.visible=function(e,t){t?e.style.visibility="":e.style.visibility="hidden"},e("co-container"),o.inherits(i,a),i.prototype.template=function(){return e("../template.html")},i.prototype.ready=function(e){e.addBinding(this.element,"class","orientation"),e.addBinding(this.element,"class-reverse","reverse"),this.checkDisabled(),this.refresh()},i.prototype.defaults={min:{type:Number,value:0,refresh:!0},max:{type:Number,value:100,refresh:!0},step:{type:Number,value:1,refresh:!0},value:{type:Number,value:0,refresh:!0},fill:{type:Boolean,value:!0,refresh:!0,optional:!0},reverse:{type:Boolean,value:!1,refresh:!0,optional:!0},orientation:{type:String,value:"horizontal",values:["horizontal","vertical"],refresh:!0},disabled:{type:Boolean,value:!1,refresh:!0}},i.prototype.refresh=function(e){var t=this.max<this.min;switch(e&&(this[e]=o.reviveByType(this[e],this.defaults[e].type)),e){case"disabled":this.checkDisabled();break;case"value":this.element.value=this.value,this.redraw();break;case"max":t&&(this.min=this.max),this.value>this.max&&(this.value=this.max),this.redraw();break;case"min":t&&(this.max=this.min),this.value<this.min&&(this.value=this.min),this.redraw();break;case"step":this[e]<=0&&(this[e]=1);break;case"orientation":this.filler.style.width=this.filler.style.height="auto",this.redraw();break;default:this.redraw()}o.dispatchEvent(this.element,"refresh",{detail:e})},i.prototype.handleEvent=function(e){var t=e.touches?e.touches.length:1;if(e.stopPropagation(),t<2)switch(e.type){case r.events.start:this.focus();case r.events.move:e.preventDefault(),e=r.getOriginalEvent(e),this.processEvent(e),o.dispatchEvent(this.element,"change");break;case r.events.end:this.blur()}},i.prototype.checkDisabled=function(){this.disabled?this.disable():this.enable()},i.prototype.enable=function(){this.element.addEventListener(r.events.start,this)},i.prototype.disable=function(){this.element.removeEventListener(r.events.start,this)},i.prototype.focus=function(){document.addEventListener(r.events.move,this),document.addEventListener(r.events.end,this),o.dispatchEvent(this.element,"focus")},i.prototype.blur=function(){document.removeEventListener(r.events.move,this),document.removeEventListener(r.events.end,this),o.dispatchEvent(this.element,"blur")},i.prototype.processEvent=function(e){var t,n=this.element.getBoundingClientRect();t="horizontal"==this.orientation?(e.pageX-n.left)/n.width:(e.pageY-n.top)/n.height,this.reverse&&(t=1-t),this.value=(this.max-this.min)*t+this.min},i.prototype.redraw=function(){this.value=this.getValidValue(this.value),this.position=this.getPositionFromValue(this.value),this.draw()},i.prototype.getValidValue=function(e){return e=o.rangeValue(e,this.min,this.max),e>=this.max?this.max:(e=Math.round((e-this.min)/this.step)*this.step+this.min,e=this.normalizeFloatNumber(e))},i.prototype.getPositionFromValue=function(e){return this.max===this.min?0:(e-this.min)/(this.max-this.min)},i.prototype.draw=function(){var e="horizontal"===this.orientation?"width":"height";this.filler.style[e]=100*this.position+"%"},i.prototype.normalizeFloatNumber=function(e){var t=this.step+1,n=t.toString().split("."),i=n[1]?n[1].length:0;return parseFloat(e.toFixed(i))},n.Slider=i},{"../template.html":9,"co-container":3,component:11,prefixer:"prefixer",rivets:"rivets",touch:"touch",utils:"utils"}],9:[function(e,t,n){t.exports='<co-container container="false" fixed="size, position, animation, action" class="slider" user-label="Slider content" co-slider><co-container container="false" fixed="size, position, animation, action" class="slider-fill" rv-visible="fill" user-label="Slider fill" data-prevent-right-swipe="true" data-prevent-left-swipe="true" co-slider></co-container><div class="slider-handler-wrapper" co-slider><co-container container="false" fixed="size, position, animation, action" class="slider-handler" user-label="Slider handler" data-prevent-right-swipe="true" data-prevent-left-swipe="true" co-slider><content co-slider></content></co-container></div></co-container>'},{}],10:[function(e,t,n){t.exports={localizationPath:"components/{name}/i18n/{lang}.json"}},{}],11:[function(e,t,n){"use strict";function i(e,t,n){l.components[e]=r(e,t,n)}function r(e,t,n){var i;"object"===("undefined"==typeof e?"undefined":a(e))?(i=e.name,t=e.constructor,n=e.localExtensions):i=e,t.prototype.localizationTemplate=e.localizationTemplate||d.localizationPath;var r={name:i,block:t.block,"static":o(t.prototype.defaults),template:t.prototype.template,constructor:t,initialize:function(e,n){var r=u.toCamelCaseObject(t.prototype.defaults),o=p(r,n,i),s=new t(e,o,this.view,this);return t.prototype.name=i,f.call(this,s,r,n.model||{}),s},unbind:function(){}};return n&&l._.extensions.forEach(function(e){var t=n[e];t&&(r[e]=t)}),r}function o(e){return Object.keys(e).filter(function(t){return s(e,t)}).map(function(e){return u.toCamelCase(e)})}function s(e,t){return e[t]&&e[t]["static"]}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=e("rivets"),u=e("utils"),c=e("./src/js/ComponentConstructor.js").ComponentConstructor,p=e("./src/js/buildModel.js"),f=e("./src/js/buildObservations.js"),d=e("./config.json");t.exports=i,t.exports.createComponent=r,t.exports.Component=c},{"./config.json":10,"./src/js/ComponentConstructor.js":12,"./src/js/buildModel.js":15,"./src/js/buildObservations.js":16,rivets:"rivets",utils:"utils"}],12:[function(e,t,n){"use strict";function i(e,t,n,i){this.element=e,this.parentScope=n.models,m.mixin(this,t),this.element.model=this,this.element.view={subscribe:d.bind(this)},this.element.setAttribute("co-component",""),this.model=t,this.view=n,this.binding=i,this.element.addEventListener("activate",o.bind(this)),this.element.addEventListener("deactivate",s.bind(this)),this.setIsConfigurable()}function r(e){var t=e.replace("co-","").split("-").join(" ");return t[0].toUpperCase()+t.substring(1,t.lenght)}function o(e){if("function"==typeof this.activate&&a(e)){var t=m.parse(this);this.activate(e.target),this.difference=m.difference(t,m.parse(this))}}function s(e){"function"==typeof this.deactivate&&a(e)&&this.deactivate(e.target),m.deepMixin(this,this.difference)}function a(e){return e.detail&&!!e.detail.isCobaltEvent}function l(e){return p(e).some(function(e){return c(e)})}function u(e){var t=e.element&&e.element.binders;return t&&Object.keys(t).some(function(e){return c(t[e].keypath)})}function c(e){return m.startsWith(e,"m.common")}function p(e,t){return t=t||[],e&&"function"==typeof e.getKeypath&&(t.push(e.getKeypath()),p(e.parentScope,t)),t}function f(e){return e.getAttribute("user-label")}function d(e){var t=this;g.subscribeEvent(function(n){n.type===g.EventType.DOM_REFRESHED&&n.element===t.element&&e(t.element)})}var h="undefined"==typeof Promise?e("es6-promise").Promise:Promise,m=e("utils"),v=e("./buildKeypath.js"),y=e("./buildLocalization.js"),b=e("general-model"),g=e("dispatcher");i.prototype.isCommon=function(){return l(this)||u(this)},i.prototype.getTextElementsByProperty=function(e){return m.toArray(this.element.querySelectorAll("[rv-html]")).filter(function(t){return t.getAttribute("rv-html")===e}).filter(function(e){return e.scope===this},this)},i.prototype.getLocalization=function(e){return y(this.__proto__.constructor,e)},i.prototype.getAbsoluteKeypath=function(){return v(this.parentScope,this.getKeypath())},i.prototype.getKeypath=function(){return this.element.getAttribute("model")||""},i.prototype.toJSON=function(){var e=this;return Object.keys(this).reduce(function(t,n){return e.model.hasOwnProperty(n)&&(t[n]=e[n]),t},{})},i.prototype.setIsConfigurable=function(){var e=this.getKeypath();Object.defineProperty(this,"isConfigurable",{value:m.startsWith(e,"m."),enumerable:!0,configurable:!1,writable:!0})},i.prototype.getLabel=function(e){return new h(function(t,n){var i=f(this.element);i?t(i):y(this.__proto__.constructor,e).then(function(e){t(e.name)})["catch"](function(e){t(r(this.name||this.element.tagName.toLowerCase()))}.bind(this))}.bind(this))},i.prototype.setLabel=function(e){this.element.setAttribute("user-label",e)},i.prototype.subscribe=function(e){return(new b.ModelNotifier).observe(this.model).subscribe(function(t){e(t)},!0)},n.ComponentConstructor=i},{"./buildKeypath.js":13,"./buildLocalization.js":14,dispatcher:"dispatcher","es6-promise":"es6-promise","general-model":"general-model",utils:"utils"}],13:[function(e,t,n){"use strict";function i(e,t){var n=s(t);return e?n?e+"."+s(t):e:t}function r(e,t){return t=t||[],e&&e.keypath&&(t.unshift(o(e),e.index),r(e.__proto__,t)),t}function o(e){return e.__proto__.keypath?s(e.keypath):e.keypath}function s(e){return e.split(".").slice(1).join(".")}t.exports=function(e,t){return i(r(e).join("."),t)}},{}],14:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n="en",i=t||n;return o(e,i,n).then(function(t){return u(t.defaults,e.prototype.defaults,i).then(function(){return t})})}function o(e,t,n){var i=s(e,t);return a(i).then(function(i){if(l(i))return i;if(t!==n){var r=s(e,n);return a(r)}return h.resolve({})})}function s(e,t){return(0,p.template)(e.prototype.localizationTemplate,{name:e.prototype.name,lang:t})}function a(e){var t=!0,n=null;return m.isCache(e)||m.set(e,(0,c.loadJSON)(e,n,t)),m.get(e).then(function(e){return Object.assign({},e)})}function l(e){return e&&Object.keys(e).length}function u(e,t,n){var i=[],o=function(o){var s=t[o],a=void 0;if(s.sealed)return"continue";if(s.base)a=r(s.base,n).then(function(t){return e[o].defaults=t.defaults});else{if(!s.scheme)return"continue";a=u(e[o].defaults,s.scheme,n)}i.push(a)};for(var s in t){o(s)}return h.all(i)}var c=e("loader"),p=e("utils"),f=e("cache"),d=i(f),h="undefined"==typeof Promise?e("es6-promise").Promise:Promise,m=new d["default"];t.exports=r},{cache:2,"es6-promise":"es6-promise",loader:"loader",utils:"utils"}],15:[function(e,t,n){"use strict";function i(e,t,n){var i=s(e),o=u.toCamelCaseObject(t.model||{}),l=a(e,t),c=r(r(i,o,e),l,e);return c}function r(e,t,n){return Object.keys(t).forEach(function(i){t.hasOwnProperty(i)&&l(t[i])&&n.hasOwnProperty(i)&&(e[i]&&e[i].constructor===Object&&o(n[i].value,t[i]),e[i]=t[i])}),e}function o(e,t){return Object.keys(e).forEach(function(n){t.hasOwnProperty(n)||(t[n]=e[n])})}function s(e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n].value,t},{})}function a(e,t){return Object.keys(e).reduce(function(n,i){return t.hasOwnProperty(i)&&(e[i]&&e[i]["static"]?n[i]=u.revive(t[i]):n[i]=t[i]),n},{})}function l(e){return void 0!==e&&null!==e}var u=e("utils");t.exports=i},{utils:"utils"}],16:[function(e,t,n){"use strict";function i(e,t){setTimeout(function(){(new s.ModelNotifier).deepObserve(t,e).subscribe(function(n){t.refresh(e)},!0)},50)}function r(e,t){var n=a.indexOf(e[t].type)!==-1;return n?n:Array.isArray(e[t].type)}function o(e,t){return!!e[t].refresh}var s=e("general-model"),a=[Object,Array,DataView,"Object","Array","DataView"];t.exports=function(e,t,n){Object.keys(t).forEach(function(s){n[s]=e[s],o(t,s)&&r(t,s)&&i(s,e),this.observe(e,s,function(){o(t,s)&&e.refresh(s),e.model[s]=e[s],n[s]=e[s]}),this.observe(e.model,s,function(){e[s]=e.model[s]}),this.observe(n,s,function(){e[s]=n[s]})},this)}},{"general-model":"general-model"}],17:[function(e,t,n){"use strict";function i(e){return"object"===("undefined"==typeof e?"undefined":r(e))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(e("rivets"),e("nav"));t.exports={bind:function(e){var t=function(){this.view.models[this.keypath]=!e.paused};e.addEventListener("play",t.bind(this)),e.addEventListener("pause",t.bind(this)),o.onleave(e.pause.bind(e))},routine:function(e,t){var n;t?e.paused&&(n=e.play()):n=e.pause(),i(n)&&n["catch"](function(e){console.warn("Google Chrome from 50 and higher versions: ",e)})}}},{nav:"nav",rivets:"rivets"}],18:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){e.preventDefault()}function l(e){e.stopPropagation()}function u(e){return e<10?"0"+e:e}function c(e){e.setAttribute("sealed",""),e.children.length>0&&[].slice.call(e.children).forEach(function(e){c(e)})}function p(e,t){return 1===Math.abs(Math.floor(e)-Math.floor(t))}Object.defineProperty(n,"__esModule",{value:!0}),n.VideoPlayer=void 0;var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=e("nav"),h=i(d),m=e("rivets"),v=i(m),y=e("utils"),b=i(y),g=e("touch"),w=i(g),S=e("settings"),E=i(S),T=e("dispatcher"),k=i(T),j=e("component");v["default"].formatters.coVideoTimeToString=function(e){return e=Math.floor(e),u(Math.floor(e/60))+":"+u(e%60)},v["default"].formatters.coVideoFormatSrc=function(e){return/\/common\//.test(e)?E["default"].media+e:e};n.VideoPlayer=function(t){function n(e,t){r(this,n);var i=o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return i.zoom=document.querySelector("co-pinch-to-zoom")||"",i.playing=!1,i.player=e,i.currentTime=0,i.duration=0,i.lastTap=0,i.isFullScreen=!1,i.isInitialState=!0,i.video=i.player.getElementsByTagName("video")[0],i.video.muted=i.muted,i.updateHideControlsStatus(),k["default"].subscribeAction(function(e){e.type===k["default"].ActionType.EDIT_PRESENTATION&&(i.playing=!1,setTimeout(function(){i.playing=!1},500),i.isFullScreen&&(i.exitFullScreen(),i.isFullScreen=!1))}),setInterval(function(){i.playing&&Math.ceil(i.video.currentTime)!==Math.ceil(i.time)&&i.timeUpdate()},500),h["default"].onenter(function(){i.playOnSlideenter&&(i.fullScreenOnPlaying&&(i.enterFullScreen(),i.isFullScreen=!0),setTimeout(function(){i.playing=!1,i.playing=!0},0))}),h["default"].onleave(function(){i.playing=!1}),i}return s(n,t),f(n,[{key:"ready",value:function(){var e=this;setTimeout(function(){var t=e.element.querySelector("co-slider");c(t),e.video=e.player.querySelector("video"),e.progressBar=e.player.querySelector(".progress-bar"),e.preventVideoControls&&e.video.addEventListener(w["default"].events.move,a),["play","timeupdate","ended","durationchange"].forEach(function(t){e.video.addEventListener(t,e)}),["left","right"].forEach(function(t){e.progressBar.addEventListener("swipe"+t,function(e){return e.stopPropagation()})}),e.progressBar.addEventListener("focus",e.rewindStart.bind(e)),e.progressBar.addEventListener("blur",e.rewindEnd.bind(e)),e.updateLoopStatus()},0)}},{key:"rewind",value:function(e,t){Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)},t.currentTime=Math.trunc(e.target.model.value),Math.trunc(t.video.currentTime)!==Math.trunc(t.currentTime)&&(t.video.currentTime=t.currentTime)}},{key:"rewindStart",value:function(){this.isPaused=this.video.paused,this.playing=!1}},{key:"rewindEnd",value:function(){this.isPaused||(this.playing=!0)}},{key:"addBlockSwipeVideo",value:function(e){["left","right"].forEach(function(t){e.addEventListener("swipe"+t,l)})}},{key:"removeBlockSwipeVideo",value:function(e){["left","right"].forEach(function(t){e.removeEventListener("swipe"+t,l)})}},{key:"handleEvent",value:function(e){switch(e.type){case"play":this.video.parentElement.classList.remove("init"),this.video.addEventListener("click",a);break;case"timeupdate":this.timeUpdate();break;case"ended":this.playing=!1;break;case"durationchange":this.duration=Math.round(this.pauseVideoAfterSuchTime)||this.video.duration}}},{key:"timeUpdate",value:function(){this.duration=Math.round(this.pauseVideoAfterSuchTime)||this.video.duration,this.pauseVideoAfterSuchTime&&this.currentTime===Math.round(this.pauseVideoAfterSuchTime)&&this.video.pause(),this.trackPlayProgress()}},{key:"playPause",value:function(e,t){e.stopPropagation(),(t.video.ended||t.currentTime===t.pauseVideoAfterSuchTime)&&(t.currentTime=0,t.video.currentTime=0),t.playing||t.isFullScreen||!t.fullScreenOnPlaying||(t.enterFullScreen(),t.isFullScreen=!0),t.showControls="hide-always"!==t.showControls?t.playing||!t.src:"hide-always",t.playing=!t.playing,b["default"].dispatchEvent(t.element,"playpause")}},{key:"toggleFullScreen",value:function(e,t){function n(){t.isFullScreen=!t.isFullScreen,i&&(t.playing=!1),t[t.isFullScreen?"enterFullScreen":"exitFullScreen"].call(t),i&&setTimeout(function(){t.playing=!0},0),t.progressBar.model.refresh(),b["default"].dispatchEvent(t.element,"togglefullscreen")}var i=t.playing;if("touchend"!==e.type&&e.stopPropagation(),e.target===t.video&&"dblclick"!=e.type){var r=(new Date).getTime(),o=r-t.lastTap;o>=500&&o>0||(t.zoom&&(t.zoom.model.pzoom.zoomFactor=1,t.zoom.model.pzoom.offset.x=0,t.zoom.model.pzoom.offset.y=0,t.zoom.model.pzoom.update()),n(),e.preventDefault()),t.lastTap=r}else n()}},{key:"enterFullScreen",value:function(){this.saveStateElement={parent:this.element.parentElement,next:this.element.nextSibling},this.saveStateElement.parent.removeChild(this.element),document.body.appendChild(this.element),this.element.classList.add("full-screen"),this.checkIfClmIsIrep()&&this.element.classList.add("clm-irep"),this.addBlockSwipeVideo(this.element)}},{key:"exitFullScreen",value:function(){document.body.removeChild(this.element),this.saveStateElement.parent.insertBefore(this.element,this.saveStateElement.next),this.element.classList.remove("full-screen"),this.saveStateElement=null,this.removeBlockSwipeVideo(this.element)}},{key:"trackPlayProgress",value:function(){this.currentTime=this.video.currentTime,this.time=this.currentTime,this.updateTimeOfPlaying()}},{key:"updateTimeOfPlaying",value:function(){Math.floor(this.currentTime)!==this.savedCurrentTime&&(!isNaN(this.savedCurrentTime)&&p(this.currentTime,this.savedCurrentTime)&&this.playingDuration++,this.savedCurrentTime=Math.floor(this.currentTime))}},{key:"refresh",value:function(e){switch(e){case"pauseVideoAfterSuchTime":this.timeUpdate();break;case"showControls":this.updateHideControlsStatus();break;case"time":this.currentTime!==this.time&&(this.currentTime=this.video.currentTime=this.time);break;case"loop":this.updateLoopStatus();break;case"muted":this.video.muted=this.muted;break;default:this.playing=!1,this.currentTime=0,this.duration=0}}},{key:"updateLoopStatus",value:function(){this.video.loop=this.loop}},{key:"updateHideControlsStatus",value:function(){this.hideControls="hide-always"===this.showControls}},{key:"checkIfClmIsIrep",value:function(){return"irep"===E["default"]._env.currentClm}},{key:"template",value:function(){return e("../template.html")}},{key:"defaults",get:function(){return{playOnSlideenter:{type:Boolean,value:!1},playing:{type:Boolean,value:!1,sealed:!0},time:{type:Number,value:0,refresh:!0,sealed:!0},src:{type:"File",value:"",fileTypes:["video"],refresh:!0},poster:{type:"File",value:"",fileTypes:["image"]},showControls:{value:!0,values:[!0,"hide-always"],type:String,refresh:!0},loop:{value:!1,type:Boolean,refresh:!0},fullScreenOnPlaying:{value:!1,type:Boolean},playingDuration:{type:Number,value:0,sealed:!0},pauseVideoAfterSuchTime:{type:Number,value:0},muted:{type:Boolean,value:!1,refresh:!0},preventVideoControls:{type:Boolean,value:!0}}}}]),n}(j.Component)},{"../template.html":19,component:11,dispatcher:"dispatcher",nav:"nav",rivets:"rivets",settings:"settings",touch:"touch",utils:"utils"}],19:[function(e,t,n){t.exports='<div class="video-player init" rv-class-playing="playing" rv-class-show-controls="showControls" rv-class-hide-controls="hideControls" dynamic="true" co-video><video rv-src="src | coVideoFormatSrc" rv-poster="poster | coVideoFormatSrc" rv-playing="playing" rv-on-tap="playPause" rv-on-touchend="toggleFullScreen" rv-on-dblclick="toggleFullScreen" co-video></video><div class="video-controls" sealed co-video><button class="play-pause" rv-on-tap="playPause" co-video></button><co-slider sealed class="progress-bar" value="currentTime" max="duration" rv-on-change="rewind" co-video></co-slider><div class="time-current" rv-html="currentTime | coVideoTimeToString" co-video></div><p class="separator" co-video>/</p><div class="time-duration" rv-html="duration | coVideoTimeToString" co-video></div><button class="btn-full-screen" rv-on-tap="toggleFullScreen" co-video></button></div></div><content co-video></content>'},{}]},{},[1]);