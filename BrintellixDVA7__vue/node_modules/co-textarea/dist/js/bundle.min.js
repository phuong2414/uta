!function(){function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}return t}()({1:[function(t,e,n){(function(n){"use strict";var r=t("./src/js/textarea").Textarea,o=t("component").createComponent;e.exports=o({name:"co-textarea",constructor:r,localizationTemplate:n("i18n/{lang}.json")}),t("rivets").components[e.exports.name]=e.exports}).call(this,function(e){var n=t("settings"),r=n.components;return r+"/co-textarea/"+e})},{"./src/js/textarea":10,component:4,rivets:"rivets",settings:"settings"}],2:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t),this.storage={}}return o(t,[{key:"set",value:function(t,e){this.storage[t]=e}},{key:"get",value:function(t){return this.storage[t]}},{key:"isCache",value:function(t){return Object.prototype.hasOwnProperty.call(this.storage,t)}}]),t}();e.exports=i},{}],3:[function(t,e,n){e.exports={localizationPath:"components/{name}/i18n/{lang}.json"}},{}],4:[function(t,e,n){"use strict";function r(t,e,n){a.components[t]=o(t,e,n)}function o(t,e,n){var r;"object"===("undefined"==typeof t?"undefined":u(t))?(r=t.name,e=t.constructor,n=t.localExtensions):r=t,e.prototype.localizationTemplate=t.localizationTemplate||h.localizationPath;var o={name:r,block:e.block,"static":i(e.prototype.defaults),template:e.prototype.template,constructor:e,initialize:function(t,n){var o=c.toCamelCaseObject(e.prototype.defaults),i=f(o,n,r),s=new e(t,i,this.view,this);return e.prototype.name=r,p.call(this,s,o,n.model||{}),s},unbind:function(){}};return n&&a._.extensions.forEach(function(t){var e=n[t];e&&(o[t]=e)}),o}function i(t){return Object.keys(t).filter(function(e){return s(t,e)}).map(function(t){return c.toCamelCase(t)})}function s(t,e){return t[e]&&t[e]["static"]}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=t("rivets"),c=t("utils"),l=t("./src/js/ComponentConstructor.js").ComponentConstructor,f=t("./src/js/buildModel.js"),p=t("./src/js/buildObservations.js"),h=t("./config.json");e.exports=r,e.exports.createComponent=o,e.exports.Component=l},{"./config.json":3,"./src/js/ComponentConstructor.js":5,"./src/js/buildModel.js":8,"./src/js/buildObservations.js":9,rivets:"rivets",utils:"utils"}],5:[function(t,e,n){"use strict";function r(t,e,n,r){this.element=t,this.parentScope=n.models,p.mixin(this,e),this.element.model=this,this.element.view={subscribe:l.bind(this)},this.element.setAttribute("co-component",""),this.model=e,this.view=n,this.binding=r,this.element.addEventListener("activate",i.bind(this)),this.element.addEventListener("deactivate",s.bind(this)),this.setIsConfigurable()}function o(t){var e=t.replace("co-","").split("-").join(" ");return e[0].toUpperCase()+e.substring(1,e.lenght)}function i(t){if("function"==typeof this.activate&&u(t)){var e=p.parse(this);this.activate(t.target),this.difference=p.difference(e,p.parse(this))}}function s(t){"function"==typeof this.deactivate&&u(t)&&this.deactivate(t.target),p.deepMixin(this,this.difference)}function u(t){return t.detail&&!!t.detail.isCobaltEvent}function a(t,e){return e=e||[],t&&"function"==typeof t.getKeypath&&(e.push(t.getKeypath()),a(t.parentScope,e)),e}function c(t){return t.getAttribute("user-label")}function l(t){var e=this;y.subscribeEvent(function(n){n.type===y.EventType.DOM_REFRESHED&&n.element===e.element&&t(e.element)})}var f="undefined"==typeof Promise?t("es6-promise").Promise:Promise,p=t("utils"),h=t("./buildKeypath.js"),d=t("./buildLocalization.js"),m=t("general-model"),y=t("dispatcher");r.prototype.isCommon=function(){return a(this).some(function(t){return p.startsWith(t,"m.common")})},r.prototype.getTextElementsByProperty=function(t){return p.toArray(this.element.querySelectorAll("[rv-html]")).filter(function(e){return e.getAttribute("rv-html")===t}).filter(function(t){return t.scope===this},this)},r.prototype.getLocalization=function(t){return d(this.__proto__.constructor,t)},r.prototype.getAbsoluteKeypath=function(){return h(this.parentScope,this.getKeypath())},r.prototype.getKeypath=function(){return this.element.getAttribute("model")||""},r.prototype.toJSON=function(){var t=this;return Object.keys(this).reduce(function(e,n){return t.model.hasOwnProperty(n)&&(e[n]=t[n]),e},{})},r.prototype.setIsConfigurable=function(){var t=this.getKeypath();Object.defineProperty(this,"isConfigurable",{value:p.startsWith(t,"m."),enumerable:!0,configurable:!1,writable:!0})},r.prototype.getLabel=function(t){return new f(function(e,n){var r=c(this.element);r?e(r):d(this.__proto__.constructor,t).then(function(t){e(t.name)})["catch"](function(t){e(o(this.name||this.element.tagName.toLowerCase()))}.bind(this))}.bind(this))},r.prototype.setLabel=function(t){this.element.setAttribute("user-label",t)},r.prototype.subscribe=function(t){return(new m.ModelNotifier).observe(this.model).subscribe(function(e){t(e)},!0)},n.ComponentConstructor=r},{"./buildKeypath.js":6,"./buildLocalization.js":7,dispatcher:"dispatcher","es6-promise":"es6-promise","general-model":"general-model",utils:"utils"}],6:[function(t,e,n){"use strict";function r(t,e){var n=s(e);return t?n?t+"."+s(e):t:e}function o(t,e){return e=e||[],t&&t.keypath&&(e.unshift(i(t),t.index),o(t.__proto__,e)),e}function i(t){return t.__proto__.keypath?s(t.keypath):t.keypath}function s(t){return t.split(".").slice(1).join(".")}e.exports=function(t,e){return r(o(t).join("."),e)}},{}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n="en",r=e||n;return i(t,r,n).then(function(e){return c(e.defaults,t.prototype.defaults,r).then(function(){return e})})}function i(t,e,n){var r=s(t,e);return u(r).then(function(r){if(a(r))return r;if(e!==n){var o=s(t,n);return u(o)}return d.resolve({})})}function s(t,e){return(0,f.template)(t.prototype.localizationTemplate,{name:t.prototype.name,lang:e})}function u(t){var e=!0,n=null;return m.isCache(t)||m.set(t,(0,l.loadJSON)(t,n,e)),m.get(t)}function a(t){return t&&Object.keys(t).length}function c(t,e,n){var r=[],i=function(i){var s=e[i],u=void 0;if(s.sealed)return"continue";if(s.base)u=o(s.base,n).then(function(e){return t[i].defaults=e.defaults});else{if(!s.scheme)return"continue";u=c(t[i].defaults,s.scheme,n)}r.push(u)};for(var s in e){i(s)}return d.all(r)}var l=t("loader"),f=t("utils"),p=t("cache"),h=r(p),d="undefined"==typeof Promise?t("es6-promise").Promise:Promise,m=new h["default"];e.exports=o},{cache:2,"es6-promise":"es6-promise",loader:"loader",utils:"utils"}],8:[function(t,e,n){"use strict";function r(t,e,n){var r=s(t),i=c.toCamelCaseObject(e.model||{}),a=u(t,e),l=o(o(r,i,t),a,t);return l}function o(t,e,n){return Object.keys(e).forEach(function(r){e.hasOwnProperty(r)&&a(e[r])&&n.hasOwnProperty(r)&&(t[r]&&t[r].constructor===Object&&i(n[r].value,e[r]),t[r]=e[r])}),t}function i(t,e){return Object.keys(t).forEach(function(n){e.hasOwnProperty(n)||(e[n]=t[n])})}function s(t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n].value,e},{})}function u(t,e){return Object.keys(t).reduce(function(n,r){return e.hasOwnProperty(r)&&(t[r]&&t[r]["static"]?n[r]=c.revive(e[r]):n[r]=e[r]),n},{})}function a(t){return void 0!==t&&null!==t}var c=t("utils");e.exports=r},{utils:"utils"}],9:[function(t,e,n){"use strict";function r(t,e){setTimeout(function(){(new s.ModelNotifier).deepObserve(e,t).subscribe(function(n){e.refresh(t)},!0)},50)}function o(t,e){var n=u.indexOf(t[e].type)!==-1;return n?n:Array.isArray(t[e].type)}function i(t,e){return!!t[e].refresh}var s=t("general-model"),u=[Object,Array,DataView,"Object","Array","DataView"];e.exports=function(t,e,n){Object.keys(e).forEach(function(s){n[s]=t[s],i(e,s)&&o(e,s)&&r(s,t),this.observe(t,s,function(){i(e,s)&&t.refresh(s),t.model[s]=t[s],n[s]=t[s]}),this.observe(t.model,s,function(){t[s]=t.model[s]}),this.observe(n,s,function(){t[s]=n[s]})},this)}},{"general-model":"general-model"}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Textarea=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("touch"),c=(r(a),t("utils")),l=t("component"),f=t("nav"),p=window.navigator.userAgent,h=!!~p.toLowerCase().indexOf("ipad"),d=!!p.match(/Trident\/7\./),m=/Edge\/\d./i.test(p);n["default"]=y;var y=n.Textarea=function(e){function n(){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return t.init(),t}return s(n,e),u(n,[{key:"init",value:function(){this.textarea=this.element.getElementsByTagName("textarea")[0],this.input=document.createElement("INPUT"),this.dispatchOptions={bubbles:!1,detail:{"co-textarea":this}},this.isFocus=!1,this.addEvents(),Object.keys(this.defaults).forEach(this.refresh,this),(0,f.onenter)(function(){this.textarea.style.width="",this.textarea.disabled=this.disabled,this.input.disabled=!1,window.focus(),this.textarea.focus(),this.textarea.blur()}.bind(this)),(0,f.onleave)(function(){var t=this.textarea.getBoundingClientRect(),e=t.width-1;this.textarea.disabled=!0,this.textarea.style.width=e+"px",this.input.disabled=!0,this.isFocus=!1}.bind(this))}},{key:"addEvents",value:function(){var t=this;["error","invalid"].forEach(function(e){t.textarea.addEventListener(e,function(e){e.bubbles||(0,c.dispatchEvent)(t.element,e.type,(0,c.mixin)(t.dispatchOptions,e))})}),this.textarea.addEventListener("input",function(){t.value=t.textarea.value,t.isFocus||(t.isFocus=!0,(0,c.dispatchEvent)(t.element,"focus",t.dispatchOptions))}),this.textarea.addEventListener("keydown",function(){return t.correctCursor()}),document.addEventListener("beforeScroll",this.blurElement.bind(this,!0));var e=["tap","hold"];e.forEach(function(e){document.addEventListener(e,function(e){e.target===t.textarea||e.target===t.element?t.focusElement():t.blurElement()})}),document.addEventListener("swipeleft",function(e){return t.blurElement()}),document.addEventListener("swiperight",function(e){return t.blurElement()})}},{key:"correctCursor",value:function(){var t=this;h&&(window.focus(),setTimeout(function(){t.textarea.focus()},0))}},{key:"focusElement",value:function(){var t=this;this.isFocus||(this.isFocus=!0,setTimeout(function(){t.input.focus(),t.textarea.focus(),(0,c.dispatchEvent)(t.element,"focus",t.dispatchOptions)},0))}},{key:"blurElement",value:function(t){(this.isFocus||t)&&(this.isFocus=!1,window.focus(),this.textarea.blur(),(0,c.dispatchEvent)(this.element,"blur",this.dispatchOptions))}},{key:"normalizeValue",value:function(t,e){return t&&t.length>e&&(t=t.substring(0,e)),t}},{key:"refresh",value:function(t){var e=this[t];"value"===t&&(e=this.normalizeValue(e,this.maxLength)),this.textarea[t]&&!e?this.textarea[t]="boolean"!=typeof this.textarea[t]&&"":e&&(this.textarea[t]=e)}},{key:"template",value:function(){return t("../template.html")}},{key:"defaults",get:function(){var t={autocomplete:{values:["on","off"],type:String,refresh:!0,optional:!0},autofocus:{type:Boolean,refresh:!0,optional:!0},cols:{value:50,type:Number,refresh:!0,optional:!0},disabled:{type:Boolean,refresh:!0,optional:!0},maxLength:{value:1e3,type:Number,refresh:!0},minLength:{type:Number,refresh:!0,optional:!0},name:{type:String,refresh:!0,optional:!0},placeholder:{type:String,refresh:!0},"read-only":{type:Boolean,refresh:!0},required:{type:Boolean,refresh:!0,optional:!0},rows:{value:10,type:Number,refresh:!0,optional:!0},spellcheck:{type:Boolean,refresh:!0,optional:!0},value:{type:String,refresh:!0,value:""}};return d||m||(t.wrap={values:["soft","hard","off"],type:String,refresh:!0,optional:!0}),t}}]),n}(l.Component)},{"../template.html":11,component:4,nav:"nav",touch:"touch",utils:"utils"}],11:[function(t,e,n){e.exports='<textarea co-textarea=""></textarea>'},{}]},{},[1]);